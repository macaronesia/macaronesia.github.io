var OGVDemuxerWebMW=(()=>{var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return"undefined"!=typeof __filename&&(e=e||__filename),function(n){var t,r,o;n=n||{},t||(t=void 0!==n?n:{}),t.ready=new Promise((function(e,n){r=e,o=n}));var i,a,u,f,c,s,d=Object.assign({},t),l="object"==typeof window,p="function"==typeof importScripts,m="";"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node?(m=p?require("path").dirname(m)+"/":__dirname+"/",s=()=>{c||(f=require("fs"),c=require("path"))},i=function(e,n){return s(),e=c.normalize(e),f.readFileSync(e,n?void 0:"utf8")},u=e=>((e=i(e,!0)).buffer||(e=new Uint8Array(e)),e),a=(e,n,t)=>{s(),e=c.normalize(e),f.readFile(e,(function(e,r){e?t(e):n(r.buffer)}))},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("unhandledRejection",(function(e){throw e})),t.inspect=function(){return"[Emscripten Module object]"}):(l||p)&&(p?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},p&&(u=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),a=(e,n,t)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?n(r.response):t()},r.onerror=t,r.send(null)});var _,v=t.print||console.log.bind(console),y=t.printErr||console.warn.bind(console);Object.assign(t,d),d=null,t.wasmBinary&&(_=t.wasmBinary),t.noExitRuntime,"object"!=typeof WebAssembly&&I("no native wasm support detected");var g,h,b,k,w=!1,P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function x(e,n,t){var r=n+t;for(t=n;e[t]&&!(t>=r);)++t;if(16<t-n&&e.buffer&&P)return P.decode(e.subarray(n,t));for(r="";n<t;){var o=e[n++];if(128&o){var i=63&e[n++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|i);else{var a=63&e[n++];65536>(o=224==(240&o)?(15&o)<<12|i<<6|a:(7&o)<<18|i<<12|a<<6|63&e[n++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r}function A(e){return e?x(b,e,void 0):""}function R(){var e=g.buffer;h=e,t.HEAP8=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=k=new Int32Array(e),t.HEAPU8=b=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var W,j=[],O=[],T=[];function S(){var e=t.preRun.shift();j.unshift(e)}var M,U=0,C=null,E=null;function I(e){throw t.onAbort&&t.onAbort(e),y(e="Aborted("+e+")"),w=!0,e=new WebAssembly.RuntimeError(e+". Build with -s ASSERTIONS=1 for more info."),o(e),e}function H(){return M.startsWith("data:application/octet-stream;base64,")}if(t.preloadedImages={},t.preloadedAudios={},M="ogv-demuxer-webm-wasm.wasm",!H()){var D=M;M=t.locateFile?t.locateFile(D,m):m+D}function q(){var e=M;try{if(e==M&&_)return new Uint8Array(_);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(e){I(e)}}function F(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n(t);else{var r=n.B;"number"==typeof r?void 0===n.A?V(r)():V(r)(n.A):r(void 0===n.A?null:n.A)}}}var G=[];function V(e){var n=G[e];return n||(e>=G.length&&(G.length=e+1),G[e]=n=W.get(e)),n}var B,L,K,N,z=[null,[],[]],X={a:function(e,n,t,r){I("Assertion failed: "+A(e)+", at: "+[n?A(n):"unknown filename",t,r?A(r):"unknown function"])},f:function(){I("")},e:function(e,n,t){b.copyWithin(e,n,n+t)},d:function(e){var n=b.length;if(2147483648<(e>>>=0))return!1;for(var t=1;4>=t;t*=2){var r=n*(1+.2/t);r=Math.min(r,e+100663296);var o=Math;r=Math.max(e,r),o=o.min.call(o,2147483648,r+(65536-r%65536)%65536);e:{try{g.grow(o-h.byteLength+65535>>>16),R();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},b:function(e,n,t,r){for(var o=0,i=0;i<t;i++){var a=k[n>>2],u=k[n+4>>2];n+=8;for(var f=0;f<u;f++){var c=b[a+f],s=z[e];0===c||10===c?((1===e?v:y)(x(s,0)),s.length=0):s.push(c)}o+=u}return k[r>>2]=o,0},c:function(e,n,r,o){var i=g.buffer;t.audioPackets.push({data:i.slice?i.slice(e,e+n):new Uint8Array(new Uint8Array(i,e,n)).buffer,timestamp:r,discardPadding:o})},j:function(e,n,r,o,i,a,u,f,c,s,d){t.videoFormat={width:e,height:n,chromaWidth:r,chromaHeight:o,cropLeft:f,cropTop:c,cropWidth:a,cropHeight:u,displayWidth:s,displayHeight:d,fps:i}},h:function(e,n){function r(e){for(var n="",t=new Uint8Array(g.buffer);0!=t[e];e++)n+=String.fromCharCode(t[e]);return n}e&&(t.videoCodec=r(e)),n&&(t.audioCodec=r(n)),e=t._ogv_demuxer_media_duration(),t.duration=0<=e?e:NaN,t.loadedMetadata=!0},i:function(e,n){t.onseek&&t.onseek(e+4294967296*n)},g:function(e,n,r,o,i){var a=g.buffer;t.videoPackets.push({data:a.slice?a.slice(e,e+n):new Uint8Array(new Uint8Array(a,e,n)).buffer,timestamp:r,keyframeTimestamp:o,isKeyframe:!!i})}};function J(){function e(){if(!B&&(B=!0,t.calledRun=!0,!w)){if(F(O),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();T.unshift(e)}F(T)}}if(!(0<U)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)S();F(j),0<U||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(function(){function e(e){t.asm=e.exports,g=t.asm.k,R(),W=t.asm.w,O.unshift(t.asm.l),U--,t.monitorRunDependencies&&t.monitorRunDependencies(U),0==U&&(null!==C&&(clearInterval(C),C=null),E&&(e=E,E=null,e()))}function n(n){e(n.instance)}function r(e){return function(){if(!_&&(l||p)){if("function"==typeof fetch&&!M.startsWith("file://"))return fetch(M,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+M+"'";return e.arrayBuffer()})).catch((function(){return q()}));if(a)return new Promise((function(e,n){a(M,(function(n){e(new Uint8Array(n))}),n)}))}return Promise.resolve().then((function(){return q()}))}().then((function(e){return WebAssembly.instantiate(e,i)})).then((function(e){return e})).then(e,(function(e){y("failed to asynchronously prepare wasm: "+e),I(e)}))}var i={a:X};if(U++,t.monitorRunDependencies&&t.monitorRunDependencies(U),t.instantiateWasm)try{return t.instantiateWasm(i,e)}catch(e){return y("Module.instantiateWasm callback failed with error: "+e),!1}(_||"function"!=typeof WebAssembly.instantiateStreaming||H()||M.startsWith("file://")||"function"!=typeof fetch?r(n):fetch(M,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,i).then(n,(function(e){return y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(o)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.l).apply(null,arguments)},t._ogv_demuxer_init=function(){return(t._ogv_demuxer_init=t.asm.m).apply(null,arguments)},t._ogv_demuxer_receive_input=function(){return(t._ogv_demuxer_receive_input=t.asm.n).apply(null,arguments)},t._ogv_demuxer_process=function(){return(t._ogv_demuxer_process=t.asm.o).apply(null,arguments)},t._ogv_demuxer_destroy=function(){return(t._ogv_demuxer_destroy=t.asm.p).apply(null,arguments)},t._ogv_demuxer_flush=function(){return(t._ogv_demuxer_flush=t.asm.q).apply(null,arguments)},t._ogv_demuxer_media_length=function(){return(t._ogv_demuxer_media_length=t.asm.r).apply(null,arguments)},t._ogv_demuxer_media_duration=function(){return(t._ogv_demuxer_media_duration=t.asm.s).apply(null,arguments)},t._ogv_demuxer_seekable=function(){return(t._ogv_demuxer_seekable=t.asm.t).apply(null,arguments)},t._ogv_demuxer_keypoint_offset=function(){return(t._ogv_demuxer_keypoint_offset=t.asm.u).apply(null,arguments)},t._ogv_demuxer_seek_to_keypoint=function(){return(t._ogv_demuxer_seek_to_keypoint=t.asm.v).apply(null,arguments)},t._malloc=function(){return(t._malloc=t.asm.x).apply(null,arguments)},t._free=function(){return(t._free=t.asm.y).apply(null,arguments)},E=function e(){B||J(),B||(E=e)},t.run=J,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();function Q(e){var n=N();return e=e(),n=N()-n,t.cpuTime+=n,e}return J(),N="undefined"==typeof performance||void 0===performance.now?Date.now:performance.now.bind(performance),t.loadedMetadata=!1,t.videoCodec=null,t.audioCodec=null,t.duration=NaN,t.onseek=null,t.cpuTime=0,t.audioPackets=[],Object.defineProperty(t,"hasAudio",{get:function(){return t.loadedMetadata&&t.audioCodec}}),Object.defineProperty(t,"audioReady",{get:function(){return 0<t.audioPackets.length}}),Object.defineProperty(t,"audioTimestamp",{get:function(){return 0<t.audioPackets.length?t.audioPackets[0].timestamp:-1}}),t.videoPackets=[],Object.defineProperty(t,"hasVideo",{get:function(){return t.loadedMetadata&&t.videoCodec}}),Object.defineProperty(t,"frameReady",{get:function(){return 0<t.videoPackets.length}}),Object.defineProperty(t,"frameTimestamp",{get:function(){return 0<t.videoPackets.length?t.videoPackets[0].timestamp:-1}}),Object.defineProperty(t,"keyframeTimestamp",{get:function(){return 0<t.videoPackets.length?t.videoPackets[0].keyframeTimestamp:-1}}),Object.defineProperty(t,"nextKeyframeTimestamp",{get:function(){for(var e=0;e<t.videoPackets.length;e++){var n=t.videoPackets[e];if(n.isKeyframe)return n.timestamp}return-1}}),Object.defineProperty(t,"processing",{get:function(){return!1}}),Object.defineProperty(t,"seekable",{get:function(){return!!t._ogv_demuxer_seekable()}}),t.init=function(e){Q((function(){t._ogv_demuxer_init()})),e()},t.receiveInput=function(e,n){Q((function(){var n=e.byteLength;L&&K>=n||(L&&t._free(L),K=n,L=t._malloc(K));var r=L;new Uint8Array(g.buffer,r,n).set(new Uint8Array(e)),t._ogv_demuxer_receive_input(r,n)})),n()},t.process=function(e){e(!!Q((function(){return t._ogv_demuxer_process()})))},t.dequeueVideoPacket=function(e){t.videoPackets.length?e(t.videoPackets.shift().data):e(null)},t.dequeueAudioPacket=function(e){if(t.audioPackets.length){var n=t.audioPackets.shift();e(n.data,n.discardPadding)}else e(null)},t.getKeypointOffset=function(e,n){n(Q((function(){return t._ogv_demuxer_keypoint_offset(1e3*e)})))},t.seekToKeypoint=function(e,n){var r=Q((function(){return t._ogv_demuxer_seek_to_keypoint(1e3*e)}));r&&(t.audioPackets.splice(0,t.audioPackets.length),t.videoPackets.splice(0,t.videoPackets.length)),n(!!r)},t.flush=function(e){Q((function(){t.audioPackets.splice(0,t.audioPackets.length),t.videoPackets.splice(0,t.videoPackets.length),t._ogv_demuxer_flush()})),e()},t.close=function(){},n.ready}})();"object"==typeof exports&&"object"==typeof module?module.exports=OGVDemuxerWebMW:"function"==typeof define&&define.amd?define([],(function(){return OGVDemuxerWebMW})):"object"==typeof exports&&(exports.OGVDemuxerWebMW=OGVDemuxerWebMW);