var OGVDecoderVideoAV1W=(()=>{var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return"undefined"!=typeof __filename&&(e=e||__filename),function(n){var r,t,o;n=n||{},r||(r=void 0!==n?n:{}),r.ready=new Promise((function(e,n){t=e,o=n}));var i,a,c,s,f,u,d=r,l=Object.assign({},r),p="object"==typeof window,m="function"==typeof importScripts,y="";"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node?(y=m?require("path").dirname(y)+"/":__dirname+"/",u=()=>{f||(s=require("fs"),f=require("path"))},i=function(e,n){return u(),e=f.normalize(e),s.readFileSync(e,n?void 0:"utf8")},c=e=>((e=i(e,!0)).buffer||(e=new Uint8Array(e)),e),a=(e,n,r)=>{u(),e=f.normalize(e),s.readFile(e,(function(e,t){e?r(e):n(t.buffer)}))},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("unhandledRejection",(function(e){throw e})),r.inspect=function(){return"[Emscripten Module object]"}):(p||m)&&(m?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),e&&(y=e),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},m&&(c=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),a=(e,n,r)=>{var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=()=>{200==t.status||0==t.status&&t.response?n(t.response):r()},t.onerror=r,t.send(null)});var v,h=r.print||console.log.bind(console),_=r.printErr||console.warn.bind(console);Object.assign(r,l),l=null,r.wasmBinary&&(v=r.wasmBinary),r.noExitRuntime,"object"!=typeof WebAssembly&&D("no native wasm support detected");var g,b,w,A,R=!1,W="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function H(){var e=g.buffer;b=e,r.HEAP8=new Int8Array(e),r.HEAP16=new Int16Array(e),r.HEAP32=A=new Int32Array(e),r.HEAPU8=w=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=new Uint32Array(e),r.HEAPF32=new Float32Array(e),r.HEAPF64=new Float64Array(e)}var S,U=[],F=[],E=[];function I(){var e=r.preRun.shift();U.unshift(e)}var T,V=0,j=null,x=null;function D(e){throw r.onAbort&&r.onAbort(e),_(e="Aborted("+e+")"),R=!0,e=new WebAssembly.RuntimeError(e+". Build with -s ASSERTIONS=1 for more info."),o(e),e}function P(){return T.startsWith("data:application/octet-stream;base64,")}if(r.preloadedImages={},r.preloadedAudios={},T="ogv-decoder-video-av1-wasm.wasm",!P()){var O=T;T=r.locateFile?r.locateFile(O,y):y+O}function M(){var e=T;try{if(e==T&&v)return new Uint8Array(v);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){D(e)}}function B(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n(r);else{var t=n.B;"number"==typeof t?void 0===n.s?G(t)():G(t)(n.s):t(void 0===n.s?null:n.s)}}}var C=[];function G(e){var n=C[e];return n||(e>=C.length&&(C.length=e+1),C[e]=n=S.get(e)),n}var L,q,k,z,N=[null,[],[]],X={f:function(){D("")},e:function(e,n,r){w.copyWithin(e,n,n+r)},c:function(e){var n=w.length;if(2147483648<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var t=n*(1+.2/r);t=Math.min(t,e+100663296);var o=Math;t=Math.max(e,t),o=o.min.call(o,2147483648,t+(65536-t%65536)%65536);e:{try{g.grow(o-b.byteLength+65535>>>16),H();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},d:function(){return 0},b:function(){},a:function(e,n,r,t){for(var o=0,i=0;i<r;i++){var a=A[n>>2],c=A[n+4>>2];n+=8;for(var s=0;s<c;s++){var f=w[a+s],u=N[e];if(0===f||10===f){f=1===e?h:_;for(var d=u,l=0,p=l+NaN,m=l;d[m]&&!(m>=p);)++m;if(16<m-l&&d.buffer&&W)d=W.decode(d.subarray(l,m));else{for(p="";l<m;){var y=d[l++];if(128&y){var v=63&d[l++];if(192==(224&y))p+=String.fromCharCode((31&y)<<6|v);else{var g=63&d[l++];65536>(y=224==(240&y)?(15&y)<<12|v<<6|g:(7&y)<<18|v<<12|g<<6|63&d[l++])?p+=String.fromCharCode(y):(y-=65536,p+=String.fromCharCode(55296|y>>10,56320|1023&y))}}else p+=String.fromCharCode(y)}d=p}f(d),u.length=0}else u.push(f)}o+=c}return A[t>>2]=o,0},g:function(e,n,t,o,i,a,c,s,f,u,d,l,p,m,y,v){function h(e,n,r,t,o,i,a,c,s){var f,u;for(e.set(new Uint8Array(_,n,r*t)),f=u=0;f<i;f++,u+=r)for(n=0;n<r;n++)e[u+n]=s;for(;f<i+c;f++,u+=r){for(n=0;n<o;n++)e[u+n]=s;for(n=o+a;n<r;n++)e[u+n]=s}for(;f<t;f++,u+=r)for(n=0;n<r;n++)e[u+n]=s;return e}var _=g.buffer,b=r.videoFormat,w=(-2&p)*f/c,A=(-2&m)*u/s,R=d*f/c,W=l*u/s;d===b.cropWidth&&l===b.cropHeight&&(y=b.displayWidth,v=b.displayHeight);for(var H,S=r.recycledFrames,U=s*n,F=u*o,E=u*a;0<S.length;){var I=S.shift();if((b=I.format).width===c&&b.height===s&&b.chromaWidth===f&&b.chromaHeight===u&&b.cropLeft===p&&b.cropTop===m&&b.cropWidth===d&&b.cropHeight===l&&b.displayWidth===y&&b.displayHeight===v&&I.y.bytes.length===U&&I.u.bytes.length===F&&I.v.bytes.length===E){H=I;break}}H||(H={format:{width:c,height:s,chromaWidth:f,chromaHeight:u,cropLeft:p,cropTop:m,cropWidth:d,cropHeight:l,displayWidth:y,displayHeight:v},y:{bytes:new Uint8Array(U),stride:n},u:{bytes:new Uint8Array(F),stride:o},v:{bytes:new Uint8Array(E),stride:a}}),h(H.y.bytes,e,n,s,p,m,d,l,0),h(H.u.bytes,t,o,u,w,A,R,W,128),h(H.v.bytes,i,a,u,w,A,R,W,128),r.frameBuffer=H}};function J(){function e(){if(!L&&(L=!0,r.calledRun=!0,!R)){if(B(F),t(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;){var e=r.postRun.shift();E.unshift(e)}B(E)}}if(!(0<V)){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)I();B(U),0<V||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),e()}),1)):e())}}if(function(){function e(e){r.asm=e.exports,g=r.asm.h,H(),S=r.asm.p,F.unshift(r.asm.i),V--,r.monitorRunDependencies&&r.monitorRunDependencies(V),0==V&&(null!==j&&(clearInterval(j),j=null),x&&(e=x,x=null,e()))}function n(n){e(n.instance)}function t(e){return function(){if(!v&&(p||m)){if("function"==typeof fetch&&!T.startsWith("file://"))return fetch(T,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+T+"'";return e.arrayBuffer()})).catch((function(){return M()}));if(a)return new Promise((function(e,n){a(T,(function(n){e(new Uint8Array(n))}),n)}))}return Promise.resolve().then((function(){return M()}))}().then((function(e){return WebAssembly.instantiate(e,i)})).then((function(e){return e})).then(e,(function(e){_("failed to asynchronously prepare wasm: "+e),D(e)}))}var i={a:X};if(V++,r.monitorRunDependencies&&r.monitorRunDependencies(V),r.instantiateWasm)try{return r.instantiateWasm(i,e)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||P()||T.startsWith("file://")||"function"!=typeof fetch?t(n):fetch(T,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,i).then(n,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),t(n)}))}))).catch(o)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.i).apply(null,arguments)},r._ogv_video_decoder_init=function(){return(r._ogv_video_decoder_init=r.asm.j).apply(null,arguments)},r._ogv_video_decoder_async=function(){return(r._ogv_video_decoder_async=r.asm.k).apply(null,arguments)},r._ogv_video_decoder_destroy=function(){return(r._ogv_video_decoder_destroy=r.asm.l).apply(null,arguments)},r._ogv_video_decoder_process_header=function(){return(r._ogv_video_decoder_process_header=r.asm.m).apply(null,arguments)},r._ogv_video_decoder_process_frame=function(){return(r._ogv_video_decoder_process_frame=r.asm.n).apply(null,arguments)},r._free=function(){return(r._free=r.asm.o).apply(null,arguments)},r._malloc=function(){return(r._malloc=r.asm.q).apply(null,arguments)},x=function e(){L||J(),L||(x=e)},r.run=J,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();function K(e){var n=z();return e=e(),r.cpuTime+=z()-n,e}return J(),z="undefined"==typeof performance||void 0===performance.now?Date.now:performance.now.bind(performance),r.loadedMetadata=!!d.videoFormat,r.videoFormat=d.videoFormat||null,r.frameBuffer=null,r.cpuTime=0,Object.defineProperty(r,"processing",{get:function(){return!1}}),r.init=function(e){K((function(){r._ogv_video_decoder_init()})),e()},r.processHeader=function(e,n){n(K((function(){var n=e.byteLength;q&&k>=n||(q&&r._free(q),k=n,q=r._malloc(k));var t=q;return new Uint8Array(g.buffer,t,n).set(new Uint8Array(e)),r._ogv_video_decoder_process_header(t,n)})))},r.A=[],r.processFrame=function(e,n){function t(e){r._free(a),n(e)}var o=r._ogv_video_decoder_async(),i=e.byteLength,a=r._malloc(i);o&&r.A.push(t);var c=K((function(){return new Uint8Array(g.buffer,a,i).set(new Uint8Array(e)),r._ogv_video_decoder_process_frame(a,i)}));o||t(c)},r.close=function(){},r.sync=function(){r._ogv_video_decoder_async()&&(r.A.push((function(){})),K((function(){r._ogv_video_decoder_process_frame(0,0)})))},r.recycledFrames=[],r.recycleFrame=function(e){var n=r.recycledFrames;n.push(e),16<n.length&&n.shift()},n.ready}})();"object"==typeof exports&&"object"==typeof module?module.exports=OGVDecoderVideoAV1W:"function"==typeof define&&define.amd?define([],(function(){return OGVDecoderVideoAV1W})):"object"==typeof exports&&(exports.OGVDecoderVideoAV1W=OGVDecoderVideoAV1W);