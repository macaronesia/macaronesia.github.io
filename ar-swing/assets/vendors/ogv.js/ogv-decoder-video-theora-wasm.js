var OGVDecoderVideoTheoraW=(()=>{var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return"undefined"!=typeof __filename&&(e=e||__filename),function(n){var t,r,o;n=n||{},t||(t=void 0!==n?n:{}),t.ready=new Promise((function(e,n){r=e,o=n}));var i,a,c,s,u,f,d=t,p=Object.assign({},t),l="object"==typeof window,h="function"==typeof importScripts,y="";"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node?(y=h?require("path").dirname(y)+"/":__dirname+"/",f=()=>{u||(s=require("fs"),u=require("path"))},i=function(e,n){return f(),e=u.normalize(e),s.readFileSync(e,n?void 0:"utf8")},c=e=>((e=i(e,!0)).buffer||(e=new Uint8Array(e)),e),a=(e,n,t)=>{f(),e=u.normalize(e),s.readFile(e,(function(e,r){e?t(e):n(r.buffer)}))},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("unhandledRejection",(function(e){throw e})),t.inspect=function(){return"[Emscripten Module object]"}):(l||h)&&(h?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),e&&(y=e),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},h&&(c=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),a=(e,n,t)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?n(r.response):t()},r.onerror=t,r.send(null)}),t.print||console.log.bind(console);var m,_=t.printErr||console.warn.bind(console);Object.assign(t,p),p=null,t.wasmBinary&&(m=t.wasmBinary),t.noExitRuntime,"object"!=typeof WebAssembly&&j("no native wasm support detected");var v,g,b,w=!1;function A(){var e=v.buffer;g=e,t.HEAP8=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=new Int32Array(e),t.HEAPU8=b=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var W,R=[],H=[],T=[];function F(){var e=t.preRun.shift();R.unshift(e)}var U,E=0,I=null,S=null;function j(e){throw t.onAbort&&t.onAbort(e),_(e="Aborted("+e+")"),w=!0,e=new WebAssembly.RuntimeError(e+". Build with -s ASSERTIONS=1 for more info."),o(e),e}function P(){return U.startsWith("data:application/octet-stream;base64,")}if(t.preloadedImages={},t.preloadedAudios={},U="ogv-decoder-video-theora-wasm.wasm",!P()){var O=U;U=t.locateFile?t.locateFile(O,y):y+O}function x(){var e=U;try{if(e==U&&m)return new Uint8Array(m);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){j(e)}}function D(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n(t);else{var r=n.A;"number"==typeof r?void 0===n.o?V(r)():V(r)(n.o):r(void 0===n.o?null:n.o)}}}var M=[];function V(e){var n=M[e];return n||(e>=M.length&&(M.length=e+1),M[e]=n=W.get(e)),n}var L,G,B,k,q={b:function(e,n,t){b.copyWithin(e,n,n+t)},a:function(e){var n=b.length;if(2147483648<(e>>>=0))return!1;for(var t=1;4>=t;t*=2){var r=n*(1+.2/t);r=Math.min(r,e+100663296);var o=Math;r=Math.max(e,r),o=o.min.call(o,2147483648,r+(65536-r%65536)%65536);e:{try{v.grow(o-g.byteLength+65535>>>16),A();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},c:function(e,n,r,o,i,a,c,s,u,f,d,p,l,h,y,m){function _(e,n,t,r,o,i,a,c,s){var u,f;for(e.set(new Uint8Array(g,n,t*r)),u=f=0;u<i;u++,f+=t)for(n=0;n<t;n++)e[f+n]=s;for(;u<i+c;u++,f+=t){for(n=0;n<o;n++)e[f+n]=s;for(n=o+a;n<t;n++)e[f+n]=s}for(;u<r;u++,f+=t)for(n=0;n<t;n++)e[f+n]=s;return e}var g=v.buffer,b=t.videoFormat,w=(-2&l)*u/c,A=(-2&h)*f/s,W=d*u/c,R=p*f/s;d===b.cropWidth&&p===b.cropHeight&&(y=b.displayWidth,m=b.displayHeight);for(var H,T=t.recycledFrames,F=s*n,U=f*o,E=f*a;0<T.length;){var I=T.shift();if((b=I.format).width===c&&b.height===s&&b.chromaWidth===u&&b.chromaHeight===f&&b.cropLeft===l&&b.cropTop===h&&b.cropWidth===d&&b.cropHeight===p&&b.displayWidth===y&&b.displayHeight===m&&I.y.bytes.length===F&&I.u.bytes.length===U&&I.v.bytes.length===E){H=I;break}}H||(H={format:{width:c,height:s,chromaWidth:u,chromaHeight:f,cropLeft:l,cropTop:h,cropWidth:d,cropHeight:p,displayWidth:y,displayHeight:m},y:{bytes:new Uint8Array(F),stride:n},u:{bytes:new Uint8Array(U),stride:o},v:{bytes:new Uint8Array(E),stride:a}}),_(H.y.bytes,e,n,s,l,h,d,p,0),_(H.u.bytes,r,o,f,w,A,W,R,128),_(H.v.bytes,i,a,f,w,A,W,R,128),t.frameBuffer=H},d:function(e,n,r,o,i,a,c,s,u,f,d){t.videoFormat={width:e,height:n,chromaWidth:r,chromaHeight:o,cropLeft:s,cropTop:u,cropWidth:a,cropHeight:c,displayWidth:f,displayHeight:d,fps:i},t.loadedMetadata=!0}};function z(){function e(){if(!L&&(L=!0,t.calledRun=!0,!w)){if(D(H),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();T.unshift(e)}D(T)}}if(!(0<E)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)F();D(R),0<E||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(function(){function e(e){t.asm=e.exports,v=t.asm.e,A(),W=t.asm.n,H.unshift(t.asm.f),E--,t.monitorRunDependencies&&t.monitorRunDependencies(E),0==E&&(null!==I&&(clearInterval(I),I=null),S&&(e=S,S=null,e()))}function n(n){e(n.instance)}function r(e){return function(){if(!m&&(l||h)){if("function"==typeof fetch&&!U.startsWith("file://"))return fetch(U,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+U+"'";return e.arrayBuffer()})).catch((function(){return x()}));if(a)return new Promise((function(e,n){a(U,(function(n){e(new Uint8Array(n))}),n)}))}return Promise.resolve().then((function(){return x()}))}().then((function(e){return WebAssembly.instantiate(e,i)})).then((function(e){return e})).then(e,(function(e){_("failed to asynchronously prepare wasm: "+e),j(e)}))}var i={a:q};if(E++,t.monitorRunDependencies&&t.monitorRunDependencies(E),t.instantiateWasm)try{return t.instantiateWasm(i,e)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}(m||"function"!=typeof WebAssembly.instantiateStreaming||P()||U.startsWith("file://")||"function"!=typeof fetch?r(n):fetch(U,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,i).then(n,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(o)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.f).apply(null,arguments)},t._ogv_video_decoder_init=function(){return(t._ogv_video_decoder_init=t.asm.g).apply(null,arguments)},t._ogv_video_decoder_async=function(){return(t._ogv_video_decoder_async=t.asm.h).apply(null,arguments)},t._ogv_video_decoder_process_header=function(){return(t._ogv_video_decoder_process_header=t.asm.i).apply(null,arguments)},t._ogv_video_decoder_process_frame=function(){return(t._ogv_video_decoder_process_frame=t.asm.j).apply(null,arguments)},t._ogv_video_decoder_destroy=function(){return(t._ogv_video_decoder_destroy=t.asm.k).apply(null,arguments)},t._malloc=function(){return(t._malloc=t.asm.l).apply(null,arguments)},t._free=function(){return(t._free=t.asm.m).apply(null,arguments)},S=function e(){L||z(),L||(S=e)},t.run=z,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();function X(e){var n=k();return e=e(),t.cpuTime+=k()-n,e}return z(),k="undefined"==typeof performance||void 0===performance.now?Date.now:performance.now.bind(performance),t.loadedMetadata=!!d.videoFormat,t.videoFormat=d.videoFormat||null,t.frameBuffer=null,t.cpuTime=0,Object.defineProperty(t,"processing",{get:function(){return!1}}),t.init=function(e){X((function(){t._ogv_video_decoder_init()})),e()},t.processHeader=function(e,n){n(X((function(){var n=e.byteLength;G&&B>=n||(G&&t._free(G),B=n,G=t._malloc(B));var r=G;return new Uint8Array(v.buffer,r,n).set(new Uint8Array(e)),t._ogv_video_decoder_process_header(r,n)})))},t.s=[],t.processFrame=function(e,n){function r(e){t._free(a),n(e)}var o=t._ogv_video_decoder_async(),i=e.byteLength,a=t._malloc(i);o&&t.s.push(r);var c=X((function(){return new Uint8Array(v.buffer,a,i).set(new Uint8Array(e)),t._ogv_video_decoder_process_frame(a,i)}));o||r(c)},t.close=function(){},t.sync=function(){t._ogv_video_decoder_async()&&(t.s.push((function(){})),X((function(){t._ogv_video_decoder_process_frame(0,0)})))},t.recycledFrames=[],t.recycleFrame=function(e){var n=t.recycledFrames;n.push(e),16<n.length&&n.shift()},n.ready}})();"object"==typeof exports&&"object"==typeof module?module.exports=OGVDecoderVideoTheoraW:"function"==typeof define&&define.amd?define([],(function(){return OGVDecoderVideoTheoraW})):"object"==typeof exports&&(exports.OGVDecoderVideoTheoraW=OGVDecoderVideoTheoraW);