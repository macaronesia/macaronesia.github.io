var Module=void 0!==Module?Module:{};!function(){"use strict";var e,t;if((e="undefined"!=typeof window?window:self).artoolkit_wasm_url){var r=(t=e.artoolkit_wasm_url,new Promise((function(e,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){e(n.response)},n.onerror=function(){r("error "+n.status)},n.send(null)})));Module.instantiateWasm=function(e,t){return console.log("instantiateWasm: instantiating synchronously"),r.then((function(r){console.log("wasm download finished, begin instantiating"),WebAssembly.instantiate(new Uint8Array(r),e).then((function(e){console.log("wasm instantiation succeeded"),t(e.instance)})).catch((function(e){console.log("wasm instantiation failed! "+e)}))})),{}}}var n=function(e,t,r){this.id=void 0;var n=e,i=t;if(this.orientation="landscape",this.listeners={},"number"!=typeof e){var a=e;r=t,n=a.videoWidth||a.width,i=a.videoHeight||a.height,this.image=a}this.width=n,this.height=i,this.nftMarkerCount=0,this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.nftMarkers={},this.transform_mat=new Float32Array(16),this.transformGL_RH=new Float64Array(16),"undefined"!=typeof document&&(this.canvas=document.createElement("canvas"),this.canvas.width=n,this.canvas.height=i,this.ctx=this.canvas.getContext("2d")),this.videoWidth=n,this.videoHeight=i,this.videoSize=this.videoWidth*this.videoHeight,this.framepointer=null,this.framesize=null,this.dataHeap=null,this.videoLuma=null,this.camera_mat=null,this.marker_transform_mat=null,this.videoLumaPointer=null,this._bwpointer=void 0,this._lumaCtx=void 0,"string"==typeof r?this.cameraParam=new o(r,function(){this._initialize()}.bind(this),function(e){console.error("ARController: Failed to load ARCameraParam",e),this.onload(e)}.bind(this)):(this.cameraParam=r,this._initialize())};n.prototype.dispose=function(){for(var e in this.id>-1&&i.teardown(this.id),this.image&&this.image.srcObject&&n._teardownVideo(this.image),this)this[e]=null},n.prototype.process=function(e){var t=this.detectMarker(e);0!=t&&console.error("detectMarker error: "+t);var r,n,o=this.getMarkerNum();for(r in this.patternMarkers)(n=this.patternMarkers[r]).inPrevious=n.inCurrent,n.inCurrent=!1;for(r in this.barcodeMarkers)(n=this.barcodeMarkers[r]).inPrevious=n.inCurrent,n.inCurrent=!1;for(r in this.nftMarkers)(n=this.nftMarkers[r]).inPrevious=n.inCurrent,n.inCurrent=!1;for(var a=0;a<o;a++){var s=this.getMarker(a),u=i.UNKNOWN_MARKER,l=this.trackPatternMarkerId(-1);s.idPatt>-1&&(s.id===s.idPatt||-1===s.idMatrix)?(l=this.trackPatternMarkerId(s.idPatt),u=i.PATTERN_MARKER,s.dir!==s.dirPatt&&this.setMarkerInfoDir(a,s.dirPatt)):s.idMatrix>-1&&(l=this.trackBarcodeMarkerId(s.idMatrix),u=i.BARCODE_MARKER,s.dir!==s.dirMatrix&&this.setMarkerInfoDir(a,s.dirMatrix)),u!==i.UNKNOWN_MARKER&&l.inPrevious?this.getTransMatSquareCont(a,l.markerWidth,l.matrix,l.matrix):this.getTransMatSquare(a,l.markerWidth,l.matrix),l.inCurrent=!0,this.transMatToGLMat(l.matrix,this.transform_mat),this.transformGL_RH=this.arglCameraViewRHf(this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:a,type:u,marker:s,matrix:this.transform_mat,matrixGL_RH:this.transformGL_RH}})}var d=this.nftMarkerCount;for(this.detectNFTMarker(),a=0;a<d;a++){var c=this.getNFTMarker(a);if(u=i.NFT_MARKER,c.found)self.markerFound=a,self.markerFoundTime=Date.now(),(l=this.trackNFTMarkerId(a)).matrix.set(c.pose),l.inCurrent=!0,this.transMatToGLMat(l.matrix,this.transform_mat),this.transformGL_RH=this.arglCameraViewRHf(this.transform_mat),this.dispatchEvent({name:"getNFTMarker",target:this,data:{index:a,type:u,marker:c,matrix:this.transform_mat,matrixGL_RH:this.transformGL_RH}});else if(self.markerFound===a){if(Date.now()-self.markerFoundTime<=200)return;delete self.markerFound,this.dispatchEvent({name:"lostNFTMarker",target:this,data:{index:a,type:u,marker:c,matrix:this.transform_mat,matrixGL_RH:this.transformGL_RH}})}}var f=this.getMultiMarkerCount();for(a=0;a<f;a++){var m=this.getMultiMarkerPatternCount(a);l=!1,i.getTransMatMultiSquareRobust(this.id,a),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.transformGL_RH=this.arglCameraViewRHf(this.transform_mat);for(var _=0;_<m;_++)if((p=this.getMultiEachMarker(a,_)).visible>=0){l=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:a,matrix:this.transform_mat,matrixGL_RH:this.transformGL_RH}});break}if(l)for(_=0;_<m;_++){var p=this.getMultiEachMarker(a,_);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.transformGL_RH=this.arglCameraViewRHf(this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:a,markerIndex:_,marker:p,matrix:this.transform_mat,matrixGL_RH:this.transformGL_RH}})}}this._bwpointer&&this.debugDraw()},n.prototype.detectNFTMarker=function(){i.detectNFTMarker(this.id)},n.prototype.trackPatternMarkerId=function(e,t){var r=this.patternMarkers[e];return r||(this.patternMarkers[e]=r={inPrevious:!1,inCurrent:!1,matrix:new Float64Array(12),matrixGL_RH:new Float64Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(r.markerWidth=t),r},n.prototype.trackBarcodeMarkerId=function(e,t){var r=this.barcodeMarkers[e];return r||(this.barcodeMarkers[e]=r={inPrevious:!1,inCurrent:!1,matrix:new Float64Array(12),matrixGL_RH:new Float64Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(r.markerWidth=t),r},n.prototype.trackNFTMarkerId=function(e,t){var r=this.nftMarkers[e];return r||(this.nftMarkers[e]=r={inPrevious:!1,inCurrent:!1,matrix:new Float64Array(12),matrixGL_RH:new Float64Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(r.markerWidth=t),r},n.prototype.getMultiMarkerCount=function(){return i.getMultiMarkerCount(this.id)},n.prototype.getMultiMarkerPatternCount=function(e){return i.getMultiMarkerNum(this.id,e)},n.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},n.prototype.removeEventListener=function(e,t){if(this.listeners[e]){var r=this.listeners[e].indexOf(t);r>-1&&this.listeners[e].splice(r,1)}},n.prototype.dispatchEvent=function(e){var t=this.listeners[e.name];if(t)for(var r=0;r<t.length;r++)t[r].call(this,e)},n.prototype.debugSetup=function(){document.body.appendChild(this.canvas);var e=document.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this._lumaCtx=e.getContext("2d"),document.body.appendChild(e),this.setDebugMode(!0),this._bwpointer=this.getProcessingImage()},n.prototype.loadMarker=function(e,t,r){e?i.addMarker(this.id,e,t,r):r?r("Marker URL needs to be defined and not equal empty string!"):console.error("Marker URL needs to be defined and not equal empty string!")},n.prototype.loadNFTMarker=function(e,t,r){var n=this;if(e)return i.addNFTMarker(this.id,e,(function(e){n.nftMarkerCount=e+1,t(e)}),r);r?r("Marker URL needs to be defined and not equal empty string!"):console.error("Marker URL needs to be defined and not equal empty string!")},n.prototype.loadMultiMarker=function(e,t,r){return i.addMultiMarker(this.id,e,t,r)},n.prototype.getTransMatSquare=function(e,t,r){return i.getTransMatSquare(this.id,e,t),r.set(this.marker_transform_mat),r},n.prototype.getTransMatSquareCont=function(e,t,r,n){return this.marker_transform_mat.set(r),i.getTransMatSquareCont(this.id,e,t),n.set(this.marker_transform_mat),n},n.prototype.getTransMatMultiSquare=function(e,t){return i.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},n.prototype.getTransMatMultiSquareRobust=function(e,t){return i.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},n.prototype.transMatToGLMat=function(e,t,r){return null==t&&(t=new Float64Array(16)),t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=0,t[7]=0,t[11]=0,t[15]=1,null!=r&&0!==r&&(t[12]*=r,t[13]*=r,t[14]*=r),t},n.prototype.arglCameraViewRHf=function(e,t,r){var n;return(n=null==t?new Float64Array(16):t)[0]=e[0],n[4]=e[4],n[8]=e[8],n[12]=e[12],n[1]=-e[1],n[5]=-e[5],n[9]=-e[9],n[13]=-e[13],n[2]=-e[2],n[6]=-e[6],n[10]=-e[10],n[14]=-e[14],n[3]=0,n[7]=0,n[11]=0,n[15]=1,null!=r&&0!==r&&(n[12]*=r,n[13]*=r,n[14]*=r),n},n.prototype.detectMarker=function(e){return this._copyImageToHeap(e)?i.detectMarker(this.id):-99},n.prototype.getMarkerNum=function(){return i.getMarkerNum(this.id)},n.prototype.getMarker=function(e){if(0===i.getMarker(this.id,e))return i.markerInfo},n.prototype.getNFTMarker=function(e){if(0===i.getNFTMarker(this.id,e))return i.NFTMarkerInfo},n.prototype.setMarkerInfoVertex=function(e,t){for(var r=0;r<t.length;r++)this.marker_transform_mat[2*r+0]=t[r][0],this.marker_transform_mat[2*r+1]=t[r][1];return i.setMarkerInfoVertex(this.id,e)},n.prototype.cloneMarkerInfo=function(e){return JSON.parse(JSON.stringify(e))},n.prototype.getMultiEachMarker=function(e,t){if(0===i.getMultiEachMarker(this.id,e,t))return i.multiEachMarkerInfo},n.prototype.getTransformationMatrix=function(){return this.transform_mat},n.prototype.getCameraMatrix=function(){return this.camera_mat},n.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},n.prototype.setDebugMode=function(e){return i.setDebugMode(this.id,e)},n.prototype.getDebugMode=function(){return i.getDebugMode(this.id)},n.prototype.getProcessingImage=function(){return i.getProcessingImage(this.id)},n.prototype.setLogLevel=function(e){return i.setLogLevel(e)},n.prototype.getLogLevel=function(){return i.getLogLevel()},n.prototype.setMarkerInfoDir=function(e,t){return i.setMarkerInfoDir(this.id,e,t)},n.prototype.setProjectionNearPlane=function(e){return i.setProjectionNearPlane(this.id,e)},n.prototype.getProjectionNearPlane=function(){return i.getProjectionNearPlane(this.id)},n.prototype.setProjectionFarPlane=function(e){return i.setProjectionFarPlane(this.id,e)},n.prototype.getProjectionFarPlane=function(){return i.getProjectionFarPlane(this.id)},n.prototype.setThresholdMode=function(e){return i.setThresholdMode(this.id,e)},n.prototype.getThresholdMode=function(){return i.getThresholdMode(this.id)},n.prototype.setThreshold=function(e){return i.setThreshold(this.id,e)},n.prototype.getThreshold=function(){return i.getThreshold(this.id)},n.prototype.setPatternDetectionMode=function(e){return i.setPatternDetectionMode(this.id,e)},n.prototype.getPatternDetectionMode=function(){return i.getPatternDetectionMode(this.id)},n.prototype.setMatrixCodeType=function(e){return i.setMatrixCodeType(this.id,e)},n.prototype.getMatrixCodeType=function(){return i.getMatrixCodeType(this.id)},n.prototype.setLabelingMode=function(e){return i.setLabelingMode(this.id,e)},n.prototype.getLabelingMode=function(){return i.getLabelingMode(this.id)},n.prototype.setPattRatio=function(e){return i.setPattRatio(this.id,e)},n.prototype.getPattRatio=function(){return i.getPattRatio(this.id)},n.prototype.setImageProcMode=function(e){return i.setImageProcMode(this.id,e)},n.prototype.getImageProcMode=function(){return i.getImageProcMode(this.id)},n.prototype.debugDraw=function(){for(var e=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),t=new ImageData(new Uint8ClampedArray(this.canvas.width*this.canvas.height*4),this.canvas.width,this.canvas.height),r=0,n=0;r<e.length;r++,n+=4){var o=e[r];t.data[n+0]=o,t.data[n+1]=o,t.data[n+2]=o,t.data[n+3]=255}this.ctx.putImageData(t,0,0);var i=new Uint8ClampedArray(this.framesize);i.set(this.videoLuma);var a=new ImageData(i,this.videoWidth,this.videoHeight);this._lumaCtx.putImageData(a,0,0);var s=this.getMarkerNum();for(r=0;r<s;r++)this._debugMarker(this.getMarker(r));this.transform_mat&&this.transformGL_RH&&(console.log("GL 4x4 Matrix: "+this.transform_mat),console.log("GL_RH 4x4 Mat: "+this.transformGL_RH))},n.prototype._initialize=function(){this.id=i.setup(this.width,this.height,this.cameraParam.id),this._initNFT();var e=i.frameMalloc;this.framepointer=e.framepointer,this.framesize=e.framesize,this.videoLumaPointer=e.videoLumaPointer,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.videoLuma=new Uint8Array(Module.HEAPU8.buffer,this.videoLumaPointer,this.framesize/4),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,e.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,e.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3),setTimeout(function(){this.onload&&this.onload(),this.dispatchEvent({name:"load",target:this})}.bind(this),1)},n.prototype._initNFT=function(){i.setupAR2(this.id)},n.prototype._copyImageToHeap=function(e){if(e||(e=this.image),e.data)var t=e;else this.ctx.save(),"portrait"===this.orientation?(this.ctx.translate(this.canvas.width,0),this.ctx.rotate(Math.PI/2),this.ctx.drawImage(e,0,0,this.canvas.height,this.canvas.width)):this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height),this.ctx.restore(),t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);var r=t.data;if(this.videoLuma)for(var n=0,o=0;o<this.videoSize;o++){var i=r[n+0],a=r[n+1],s=r[n+2];this.videoLuma[o]=i+i+i+s+a+a+a+a>>3,n+=4}return!!this.dataHeap&&(this.dataHeap.set(r),!0)},n.prototype._debugMarker=function(e){var t,r;t=e.vertex;var n=this.ctx;n.strokeStyle="red",n.beginPath(),n.moveTo(t[0][0],t[0][1]),n.lineTo(t[1][0],t[1][1]),n.stroke(),n.beginPath(),n.moveTo(t[2][0],t[2][1]),n.lineTo(t[3][0],t[3][1]),n.stroke(),n.strokeStyle="green",n.beginPath(),n.lineTo(t[1][0],t[1][1]),n.lineTo(t[2][0],t[2][1]),n.stroke(),n.beginPath(),n.moveTo(t[3][0],t[3][1]),n.lineTo(t[0][0],t[0][1]),n.stroke(),r=e.pos,n.beginPath(),n.arc(r[0],r[1],8,0,2*Math.PI),n.fillStyle="red",n.fill()},n.getUserMedia=function(e){var t=e.facingMode||"environment",r=e.onSuccess,o=e.onError||function(e){console.error("ARController.getUserMedia",e)},i=document.createElement("video"),a=!1,s=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],u=function(){a&&(i.play().then((function(){r(i)})).catch((function(e){o(e),n._teardownVideo(i)})),i.paused||s.forEach((function(e){window.removeEventListener(e,u,!0)})))};s.forEach((function(e){window.addEventListener(e,u,!0)}));var l=function(e){if(window.URL.createObjectURL)try{i.srcObject=e}catch(e){}i.srcObject=e,a=!0,i.autoplay=!0,i.playsInline=!0,u()},d={},c={};e.width&&(c.width=e.width,"object"==typeof e.width?(e.width.max&&(d.maxWidth=e.width.max),e.width.min&&(d.minWidth=e.width.min)):d.maxWidth=e.width),e.height&&(c.height=e.height,"object"==typeof e.height?(e.height.max&&(d.maxHeight=e.height.max),e.height.min&&(d.minHeight=e.height.min)):d.maxHeight=e.height),c.facingMode=t,c.deviceId=e.deviceId,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var f={audio:!1,video:d};return navigator.mediaDevices||window.MediaStreamTrack.getSources?navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!1,video:c}).then(l,o):window.MediaStreamTrack.getSources((function(e){var r=c.facingMode;t&&t.exact&&(r=t.exact);for(var n=0;n<e.length;n++)if("video"===e[n].kind&&e[n].facing===r){f.video.mandatory.sourceId=e[n].id;break}t&&t.exact&&!f.video.mandatory.sourceId?o("Failed to get camera facing the wanted direction"):navigator.getUserMedia?navigator.getUserMedia(f,l,o):o("navigator.getUserMedia is not supported on your browser")})):navigator.getUserMedia?navigator.getUserMedia(f,l,o):o("navigator.getUserMedia is not supported on your browser"),i},n.getUserMediaARController=function(e){var t={};for(var r in e)t[r]=e[r];var i=e.onSuccess,a=e.cameraParam,s=e.onError||function(e){console.error("ARController: Failed to load ARCameraParam",e)};t.onSuccess=function(){new o(a,(function(){var t=(e.maxARVideoSize||Math.max(u.videoWidth,u.videoHeight))/Math.max(u.videoWidth,u.videoHeight),r=t*u.videoWidth,o=t*u.videoHeight;if(u.videoWidth<u.videoHeight){var a=r;r=o,o=a}var s=new n(r,o,this);s.image=u,u.videoWidth<u.videoHeight?(s.orientation="portrait",s.videoWidth=u.videoHeight,s.videoHeight=u.videoWidth):(s.orientation="landscape",s.videoWidth=u.videoWidth,s.videoHeight=u.videoHeight),i(s,this)}),(function(e){n._teardownVideo(u),s(e)}))};var u=n.getUserMedia(t);return u},n._teardownVideo=function(e){e.srcObject.getVideoTracks()[0].stop(),e.srcObject=null,e.src=null};var o=function(e,t,r){this.id=-1,this._src="",this.complete=!1,t?this.onload=t:(this.onload=function(){console.log("Successfully loaded")},console.warn("onload callback should be defined")),r?this.onerror=r:(this.onerror=function(e){console.error("Error: "+e)},console.warn("onerror callback should be defined")),e?this.load(e):console.warn("No camera parameter file defined! It should be defined in constructor or in ARCameraParam.load(url)")};o.prototype.load=function(e){if(""!==this._src)throw"ARCameraParam: Trying to load camera parameters twice.";this._src=e,e&&i.loadCamera(e,function(e){this.id=e,this.complete=!0,this.onload()}.bind(this),function(e){this.onerror(e)}.bind(this))},Object.defineProperty(o.prototype,"src",{set:function(e){this.load(e)},get:function(){return this._src}}),o.prototype.dispose=function(){-1!==this.id&&i.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var i={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,NFT_MARKER:2,loadCamera:function(e,t,r){var n="/camera_param_"+d++,o=function(e){if(Module._loadCamera){var r=Module._loadCamera(n);t&&t(r)}else t&&t(r),setTimeout(o,10)};"object"==typeof e?c(n,e,o):e.indexOf("\n")>-1?function(e,t,r){for(var n=new Uint8Array(t.length),o=0;o<n.length;o++)n[o]=255&t.charCodeAt(o);c(e,n,r)}(n,e,o):f(e,n,o,r)},addMarker:function(e,t,r,n){var o="/marker_"+u++;f(t,o,(function(){var t=Module._addMarker(e,o);r&&r(t)}),(function(e){n&&n(e)}))},addMultiMarker:function(e,t,r,n){var o="/multi_marker_"+l++;f(t,o,(function(n){var i=function(e){var t,r=(t=e,String.fromCharCode.apply(String,t)).split("\n"),n=[],o=0;return r.forEach((function(e){if((e=e.trim())&&!e.startsWith("#"))switch(o){case 0:return void(o=1);case 1:e.match(/^\d+$/)||n.push(e);case 2:case 3:case 4:return void o++;case 5:return void(o=1)}})),n}(n);function a(){var t=Module._addMultiMarker(e,o),n=Module.getMultiMarkerNum(e,t);r&&r(t,n)}if(!i.length)return a();var s=t.split("/").slice(0,-1).join("/");m(i=i.map((function(e){return[s+"/"+e,e]})),a)}),(function(e){n&&n(e)}))},addNFTMarker:function(e,t,r,n){var o="/markerNFT_"+u++,i=o+".iset",a=o+".fset3";f(t+".fset",o+".fset",(function(){f(t+".iset",i,(function(){f(t+".fset3",a,(function(){var t=Module._addNFTMarker(e,o);r&&r(t)}),(function(e){n&&n(e)}))}),(function(e){n&&n(e)}))}),(function(e){n&&n(e)}))}},a=["setup","teardown","setupAR2","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","detectNFTMarker","getNFTMarker","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function s(){for(var e in a.forEach((function(e){i[e]=Module[e]})),Module)e.match(/^AR/)&&(i[e]=Module[e])}var u=0,l=0,d=0;function c(e,t,r){FS.writeFile(e,t,{encoding:"binary"}),r(t)}function f(e,t,r,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){if(200==this.status){var e=o.response,i=new Uint8Array(e);c(t,i,r)}else n(this.status)},o.send()}function m(e,t){var r=e.pop();r?f(r[0],r[1],(function(){m(e,t)})):t()}e.artoolkit=i,e.ARController=n,e.ARCameraParam=o,e.artoolkit_wasm_url&&(e.Module=Module),e.Module?e.Module.onRuntimeInitialized=function(){s();var t=new Event("artoolkit-loaded");e.dispatchEvent(t)}:e.Module={onRuntimeInitialized:function(){s()}}}();var key,moduleOverrides={};for(key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var arguments_=[],thisProgram="./this.program",quit_=function(e,t){throw t},ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_HAS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_HAS_NODE="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,ENVIRONMENT_IS_NODE=ENVIRONMENT_HAS_NODE&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var read_,readAsync,readBinary,setWindowTitle,nodeFS,nodePath,scriptDirectory="";function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}ENVIRONMENT_IS_NODE?(scriptDirectory=__dirname+"/",read_=function(e,t){return nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),e=nodePath.normalize(e),nodeFS.readFileSync(e,t?null:"utf8")},readBinary=function(e){var t=read_(e,!0);return t.buffer||(t=new Uint8Array(t)),assert(t.buffer),t},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),"undefined"!=typeof module&&(module.exports=Module),process.on("uncaughtException",(function(e){if(!(e instanceof ExitStatus))throw e})),process.on("unhandledRejection",abort),quit_=function(e){process.exit(e)},Module.inspect=function(){return"[Emscripten Module object]"}):ENVIRONMENT_IS_SHELL?("undefined"!=typeof read&&(read_=function(e){return read(e)}),readBinary=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(assert("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?arguments_=scriptArgs:"undefined"!=typeof arguments&&(arguments_=arguments),"function"==typeof quit&&(quit_=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=0!==scriptDirectory.indexOf("blob:")?scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1):"",read_=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)},setWindowTitle=function(e){document.title=e});var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);for(key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);function dynamicAlloc(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=t+e+15&-16;return r>_emscripten_get_heap_size()&&abort(),HEAP32[DYNAMICTOP_PTR>>2]=r,t}function getNativeTypeSize(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":case"float":return 4;case"i64":case"double":return 8;default:if("*"===e[e.length-1])return 4;if("i"===e[0]){var t=parseInt(e.substr(1));return assert(t%8==0,"getNativeTypeSize invalid bits "+t+", type "+e),t/8}return 0}}moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var wasmBinary,noExitRuntime,wasmMemory,asm2wasmImports={"f64-rem":function(e,t){return e%t},debugger:function(){}},functionPointers=new Array(0),tempRet0=0,setTempRet0=function(e){tempRet0=e},getTempRet0=function(){return tempRet0};function setValue(e,t,r,n){switch("*"===(r=r||"i8").charAt(r.length-1)&&(r="i32"),r){case"i1":case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.wasmBinary&&(wasmBinary=Module.wasmBinary),Module.noExitRuntime&&(noExitRuntime=Module.noExitRuntime),"object"!=typeof WebAssembly&&err("no native wasm support detected");var wasmTable=new WebAssembly.Table({initial:878,maximum:878,element:"anyfunc"}),ABORT=!1,EXITSTATUS=0;function assert(e,t){e||abort("Assertion failed: "+t)}var ALLOC_NORMAL=0,ALLOC_NONE=3;function allocate(e,t,r,n){var o,i;"number"==typeof e?(o=!0,i=e):(o=!1,i=e.length);var a,s="string"==typeof t?t:null;if(a=r==ALLOC_NONE?n:[_malloc,stackAlloc,dynamicAlloc][r](Math.max(i,s?1:t.length)),o){var u;for(n=a,assert(0==(3&a)),u=a+(-4&i);n<u;n+=4)HEAP32[n>>2]=0;for(u=a+i;n<u;)HEAP8[n++>>0]=0;return a}if("i8"===s)return e.subarray||e.slice?HEAPU8.set(e,a):HEAPU8.set(new Uint8Array(e),a),a;for(var l,d,c,f=0;f<i;){var m=e[f];0!==(l=s||t[f])?("i64"==l&&(l="i32"),setValue(a+f,m,l),c!==l&&(d=getNativeTypeSize(l),c=l),f+=d):f++}return a}function getMemory(e){return runtimeInitialized?_malloc(e):dynamicAlloc(e)}var UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t,r){for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;if(o-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(a);else{var l=a-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function UTF8ToString(e,t){return e?UTF8ArrayToString(HEAPU8,e,t):""}function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=i)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}var UTF16Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function allocateUTF8(e){var t=lengthBytesUTF8(e)+1,r=_malloc(t);return r&&stringToUTF8Array(e,HEAP8,r,t),r}function writeArrayToMemory(e,t){HEAP8.set(e,t)}function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,WASM_PAGE_SIZE=65536;function updateGlobalBufferAndViews(e){buffer=e,Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=HEAPU16=new Uint16Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e)}var DYNAMIC_BASE=5303200,DYNAMICTOP_PTR=60128,INITIAL_TOTAL_MEMORY=Module.TOTAL_MEMORY||268435456;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}(wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_TOTAL_MEMORY/WASM_PAGE_SIZE,maximum:INITIAL_TOTAL_MEMORY/WASM_PAGE_SIZE}))&&(buffer=wasmMemory.buffer),INITIAL_TOTAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE;var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,Module.noFSInit||FS.init.initialized||FS.init(),TTY.init(),callRuntimeCallbacks(__ATINIT__)}function preMain(){FS.ignorePermissions=!1,callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){runtimeExited=!0}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(e){return e}function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}function abort(e){throw Module.onAbort&&Module.onAbort(e),out(e+=""),err(e),ABORT=!0,EXITSTATUS=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}Module.preloadedImages={},Module.preloadedAudios={};var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(e){return String.prototype.startsWith?e.startsWith(dataURIPrefix):0===e.indexOf(dataURIPrefix)}var tempDouble,tempI64,wasmBinaryFile="artoolkit_wasm.wasm";function getBinary(){try{if(wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(wasmBinaryFile);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){return wasmBinary||!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER||"function"!=typeof fetch?new Promise((function(e,t){e(getBinary())})):fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return e.arrayBuffer()})).catch((function(){return getBinary()}))}function createWasm(){var e={env:asmLibraryArg,wasi_unstable:asmLibraryArg,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:asm2wasmImports};function t(e,t){var r=e.exports;Module.asm=r,removeRunDependency("wasm-instantiate")}function r(e){t(e.instance)}function n(t){return getBinaryPromise().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){err("failed to asynchronously prepare wasm: "+e),abort(e)}))}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(e,t)}catch(e){return err("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||isDataURI(wasmBinaryFile)||"function"!=typeof fetch)return n(r);fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){err("wasm streaming compile failed: "+e),err("falling back to ArrayBuffer instantiation"),n(r)}))}))}(),{}}isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile)),Module.asm=createWasm;var ASM_CONSTS=[function(e,t,r,n,o,i){artoolkit.frameMalloc||(artoolkit.frameMalloc={});var a=artoolkit.frameMalloc;a.framepointer=t,a.framesize=r,a.camera=n,a.transform=o,a.videoLumaPointer=i},function(e,t,r,n){artoolkit.multiEachMarkerInfo||(artoolkit.multiEachMarkerInfo={});var o=artoolkit.multiEachMarkerInfo;o.visible=e,o.pattId=t,o.pattType=r,o.width=n},function(e,t,r,n,o,i,a,s,u,l,d,c,f,m,_,p,h,g,y,S,v,F,E,M,w,A,k,T,P,b,D,R,H){var N=arguments,C=12;artoolkit.markerInfo||(artoolkit.markerInfo={pos:[0,0],line:[[0,0,0],[0,0,0],[0,0,0],[0,0,0]],vertex:[[0,0],[0,0],[0,0],[0,0]]});var L=artoolkit.markerInfo;L.area=e,L.id=t,L.idPatt=r,L.idMatrix=n,L.dir=o,L.dirPatt=i,L.dirMatrix=a,L.cf=s,L.cfPatt=u,L.cfMatrix=l,L.pos[0]=d,L.pos[1]=c,L.line[0][0]=N[C++],L.line[0][1]=N[C++],L.line[0][2]=N[C++],L.line[1][0]=N[C++],L.line[1][1]=N[C++],L.line[1][2]=N[C++],L.line[2][0]=N[C++],L.line[2][1]=N[C++],L.line[2][2]=N[C++],L.line[3][0]=N[C++],L.line[3][1]=N[C++],L.line[3][2]=N[C++],L.vertex[0][0]=N[C++],L.vertex[0][1]=N[C++],L.vertex[1][0]=N[C++],L.vertex[1][1]=N[C++],L.vertex[2][0]=N[C++],L.vertex[2][1]=N[C++],L.vertex[3][0]=N[C++],L.vertex[3][1]=N[C++],L.errorCorrected=N[C++]},function(e,t,r,n,o,i,a,s,u,l,d,c,f,m){var _=arguments,p=0;artoolkit.NFTMarkerInfo||(artoolkit.NFTMarkerInfo={id:0,error:-1,found:0,pose:[0,0,0,0,0,0,0,0,0,0,0,0]});var h=artoolkit.NFTMarkerInfo;h.id=_[p++],h.error=_[p++],h.found=1,h.pose[0]=_[p++],h.pose[1]=_[p++],h.pose[2]=_[p++],h.pose[3]=_[p++],h.pose[4]=_[p++],h.pose[5]=_[p++],h.pose[6]=_[p++],h.pose[7]=_[p++],h.pose[8]=_[p++],h.pose[9]=_[p++],h.pose[10]=_[p++],h.pose[11]=_[p++]},function(e){var t=arguments,r=0;artoolkit.NFTMarkerInfo||(artoolkit.NFTMarkerInfo={id:0,error:-1,found:0,pose:[0,0,0,0,0,0,0,0,0,0,0,0]});var n=artoolkit.NFTMarkerInfo;n.id=t[r++],n.error=-1,n.found=0,n.pose[0]=0,n.pose[1]=0,n.pose[2]=0,n.pose[3]=0,n.pose[4]=0,n.pose[5]=0,n.pose[6]=0,n.pose[7]=0,n.pose[8]=0,n.pose[9]=0,n.pose[10]=0,n.pose[11]=0}];function _emscripten_asm_const_iiiiiii(e,t,r,n,o,i,a){return ASM_CONSTS[e](t,r,n,o,i,a)}function _emscripten_asm_const_iiiid(e,t,r,n,o){return ASM_CONSTS[e](t,r,n,o)}function _emscripten_asm_const_iiddddddddddddd(e,t,r,n,o,i,a,s,u,l,d,c,f,m,_){return ASM_CONSTS[e](t,r,n,o,i,a,s,u,l,d,c,f,m,_)}function _emscripten_asm_const_ii(e,t){return ASM_CONSTS[e](t)}function _emscripten_asm_const_iiiiiiiidddddddddddddddddddddddddi(e,t,r,n,o,i,a,s,u,l,d,c,f,m,_,p,h,g,y,S,v,F,E,M,w,A,k,T,P,b,D,R,H,N){return ASM_CONSTS[e](t,r,n,o,i,a,s,u,l,d,c,f,m,_,p,h,g,y,S,v,F,E,M,w,A,k,T,P,b,D,R,H,N)}function demangle(e){return e}function demangleAll(e){return e.replace(/\b__Z[\w\d_]+/g,(function(e){var t=demangle(e);return e===t?e:t+" ["+e+"]"}))}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+="\n"+Module.extraStackTrace()),demangleAll(e)}__ATINIT__.push({func:function(){__GLOBAL__sub_I_ARToolKitJS_cpp()}},{func:function(){___emscripten_environ_constructor()}},{func:function(){__GLOBAL__sub_I_bind_cpp()}},{func:function(){__GLOBAL__sub_I_iostream_cpp()}});var ENV={};function ___buildEnvironment(e){var t,r;___buildEnvironment.called?(r=HEAP32[e>>2],t=HEAP32[r>>2]):(___buildEnvironment.called=!0,ENV.USER="web_user",ENV.LOGNAME="web_user",ENV.PATH="/",ENV.PWD="/",ENV.HOME="/home/web_user",ENV.LANG=("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",ENV._=thisProgram,t=getMemory(1024),r=getMemory(256),HEAP32[r>>2]=t,HEAP32[e>>2]=r);var n=[],o=0;for(var i in ENV)if("string"==typeof ENV[i]){var a=i+"="+ENV[i];n.push(a),o+=a.length}if(o>1024)throw new Error("Environment size exceeded TOTAL_ENV_SIZE!");for(var s=0;s<n.length;s++)writeAsciiToMemory(a=n[s],t),HEAP32[r+4*s>>2]=t,t+=a.length+1;HEAP32[r+4*n.length>>2]=0}function ___cxa_allocate_exception(e){return _malloc(e)}var ___exception_infos={},___exception_last=0;function ___cxa_throw(e,t,r){throw ___exception_infos[e]={ptr:e,adjusted:[e],type:t,destructor:r,refcount:0,caught:!1,rethrown:!1},___exception_last=e,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exceptions++:__ZSt18uncaught_exceptionv.uncaught_exceptions=1,e}function ___lock(){}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}function ___map_file(e,t){return ___setErrNo(63),-1}var PATH={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=PATH.splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:function(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return PATH.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return PATH.normalize(e.join("/"))},join2:function(e,t){return PATH.normalize(e+"/"+t)}},PATH_FS={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:FS.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t="/"===n.charAt(0)}return(t?"/":"")+(e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=PATH_FS.resolve(e).substr(1),t=PATH_FS.resolve(t).substr(1);for(var n=r(e.split("/")),o=r(t.split("/")),i=Math.min(n.length,o.length),a=i,s=0;s<i;s++)if(n[s]!==o[s]){a=s;break}var u=[];for(s=a;s<n.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){TTY.ttys[e]={input:[],output:[],ops:t},FS.registerDevice(e,TTY.stream_ops)},stream_ops:{open:function(e){var t=TTY.ttys[e.node.rdev];if(!t)throw new FS.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,n,o){if(!e.tty||!e.tty.ops.get_char)throw new FS.ErrnoError(60);for(var i=0,a=0;a<n;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new FS.ErrnoError(29)}if(void 0===s&&0===i)throw new FS.ErrnoError(6);if(null==s)break;i++,t[r+a]=s}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,r,n,o){if(!e.tty||!e.tty.ops.put_char)throw new FS.ErrnoError(60);try{for(var i=0;i<n;i++)e.tty.ops.put_char(e.tty,t[r+i])}catch(e){throw new FS.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(ENVIRONMENT_IS_NODE){var r=Buffer.alloc?Buffer.alloc(256):new Buffer(256),n=0;try{n=nodeFS.readSync(process.stdin.fd,r,0,256,null)}catch(e){if(-1==e.toString().indexOf("EOF"))throw e;n=0}t=n>0?r.slice(0,n).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=intArrayFromString(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(out(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(out(UTF8ArrayToString(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(err(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(err(UTF8ArrayToString(e.output,0)),e.output=[])}}},MEMFS={ops_table:null,mount:function(e){return MEMFS.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(FS.isBlkdev(r)||FS.isFIFO(r))throw new FS.ErrnoError(63);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var o=FS.createNode(e,t,r,n);return FS.isDir(o.mode)?(o.node_ops=MEMFS.ops_table.dir.node,o.stream_ops=MEMFS.ops_table.dir.stream,o.contents={}):FS.isFile(o.mode)?(o.node_ops=MEMFS.ops_table.file.node,o.stream_ops=MEMFS.ops_table.file.stream,o.usedBytes=0,o.contents=null):FS.isLink(o.mode)?(o.node_ops=MEMFS.ops_table.link.node,o.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(o.mode)&&(o.node_ops=MEMFS.ops_table.chrdev.node,o.stream_ops=MEMFS.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o),o},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],r=0;r<e.usedBytes;++r)t.push(e.contents[r]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)|0),0!=r&&(t=Math.max(t,256));var n=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var r=e.contents;return e.contents=new Uint8Array(new ArrayBuffer(t)),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else for(;e.contents.length<t;)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=FS.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,FS.isDir(e.mode)?t.size=4096:FS.isFile(e.mode)?t.size=e.usedBytes:FS.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&MEMFS.resizeFileStorage(e,t.size)},lookup:function(e,t){throw FS.genericErrors[44]},mknod:function(e,t,r,n){return MEMFS.createNode(e,t,r,n)},rename:function(e,t,r){if(FS.isDir(e.mode)){var n;try{n=FS.lookupNode(t,r)}catch(e){}if(n)for(var o in n.contents)throw new FS.ErrnoError(55)}delete e.parent.contents[e.name],e.name=r,t.contents[r]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var r=FS.lookupNode(e,t);for(var n in r.contents)throw new FS.ErrnoError(55);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var n=MEMFS.createNode(e,t,41471,0);return n.link=r,n},readlink:function(e){if(!FS.isLink(e.mode))throw new FS.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,n,o){var i=e.node.contents;if(o>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-o,n);if(a>8&&i.subarray)t.set(i.subarray(o,o+a),r);else for(var s=0;s<a;s++)t[r+s]=i[o+s];return a},write:function(e,t,r,n,o,i){if(!n)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(i)return a.contents=t.subarray(r,r+n),a.usedBytes=n,n;if(0===a.usedBytes&&0===o)return a.contents=new Uint8Array(t.subarray(r,r+n)),a.usedBytes=n,n;if(o+n<=a.usedBytes)return a.contents.set(t.subarray(r,r+n),o),n}if(MEMFS.expandFileStorage(a,o+n),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(r,r+n),o);else for(var s=0;s<n;s++)a.contents[o+s]=t[r+s];return a.usedBytes=Math.max(a.usedBytes,o+n),n},llseek:function(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&FS.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new FS.ErrnoError(28);return n},allocate:function(e,t,r){MEMFS.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,o,i,a){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);var s,u,l=e.node.contents;if(2&a||l.buffer!==t.buffer){(o>0||o+n<e.node.usedBytes)&&(l=l.subarray?l.subarray(o,o+n):Array.prototype.slice.call(l,o,o+n)),u=!0;var d=t.buffer==HEAP8.buffer;if(!(s=_malloc(n)))throw new FS.ErrnoError(48);(d?HEAP8:t).set(l,s)}else u=!1,s=l.byteOffset;return{ptr:s,allocated:u}},msync:function(e,t,r,n,o){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);return 2&o||MEMFS.stream_ops.write(e,t,0,n,r,!1),0}}},FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof FS.ErrnoError))throw e+" : "+stackTrace();return ___setErrNo(e.errno)},lookupPath:function(e,t){if(t=t||{},!(e=PATH_FS.resolve(FS.cwd(),e)))return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var n in r)void 0===t[n]&&(t[n]=r[n]);if(t.recurse_count>8)throw new FS.ErrnoError(32);for(var o=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),i=FS.root,a="/",s=0;s<o.length;s++){var u=s===o.length-1;if(u&&t.parent)break;if(i=FS.lookupNode(i,o[s]),a=PATH.join2(a,o[s]),FS.isMountpoint(i)&&(!u||u&&t.follow_mount)&&(i=i.mounted.root),!u||t.follow)for(var l=0;FS.isLink(i.mode);){var d=FS.readlink(a);if(a=PATH_FS.resolve(PATH.dirname(a),d),i=FS.lookupPath(a,{recurse_count:t.recurse_count}).node,l++>40)throw new FS.ErrnoError(32)}}return{path:a,node:i}},getPath:function(e){for(var t;;){if(FS.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%FS.nameTable.length},hashAddNode:function(e){var t=FS.hashName(e.parent.id,e.name);e.name_next=FS.nameTable[t],FS.nameTable[t]=e},hashRemoveNode:function(e){var t=FS.hashName(e.parent.id,e.name);if(FS.nameTable[t]===e)FS.nameTable[t]=e.name_next;else for(var r=FS.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:function(e,t){var r=FS.mayLookup(e);if(r)throw new FS.ErrnoError(r,e);for(var n=FS.hashName(e.id,t),o=FS.nameTable[n];o;o=o.name_next){var i=o.name;if(o.parent.id===e.id&&i===t)return o}return FS.lookup(e,t)},createNode:function(e,t,r,n){if(!FS.FSNode){FS.FSNode=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=FS.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},FS.FSNode.prototype={};Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var o=new FS.FSNode(e,t,r,n);return FS.hashAddNode(o),o},destroyNode:function(e){FS.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=FS.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return FS.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){return FS.nodePermissions(e,"x")||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return FS.lookupNode(e,t),20}catch(e){}return FS.nodePermissions(e,"wx")},mayDelete:function(e,t,r){var n;try{n=FS.lookupNode(e,t)}catch(e){return e.errno}var o=FS.nodePermissions(e,"wx");if(o)return o;if(r){if(!FS.isDir(n.mode))return 54;if(FS.isRoot(n)||FS.getPath(n)===FS.cwd())return 10}else if(FS.isDir(n.mode))return 31;return 0},mayOpen:function(e,t){return e?FS.isLink(e.mode)?32:FS.isDir(e.mode)&&("r"!==FS.flagsToPermissionString(t)||512&t)?31:FS.nodePermissions(e,FS.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||FS.MAX_OPEN_FDS;for(var r=e;r<=t;r++)if(!FS.streams[r])return r;throw new FS.ErrnoError(33)},getStream:function(e){return FS.streams[e]},createStream:function(e,t,r){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var n=new FS.FSStream;for(var o in e)n[o]=e[o];e=n;var i=FS.nextfd(t,r);return e.fd=i,FS.streams[i]=e,e},closeStream:function(e){FS.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=FS.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new FS.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){FS.devices[e]={stream_ops:t}},getDevice:function(e){return FS.devices[e]},getMounts:function(e){for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),FS.syncFSRequests++,FS.syncFSRequests>1&&console.log("warning: "+FS.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=FS.getMounts(FS.root.mount),n=0;function o(e){return FS.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,o(e));++n>=r.length&&o(null)}r.forEach((function(t){if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)}))},mount:function(e,t,r){var n,o="/"===r,i=!r;if(o&&FS.root)throw new FS.ErrnoError(10);if(!o&&!i){var a=FS.lookupPath(r,{follow_mount:!1});if(r=a.path,n=a.node,FS.isMountpoint(n))throw new FS.ErrnoError(10);if(!FS.isDir(n.mode))throw new FS.ErrnoError(54)}var s={type:e,opts:t,mountpoint:r,mounts:[]},u=e.mount(s);return u.mount=s,s.root=u,o?FS.root=u:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),u},unmount:function(e){var t=FS.lookupPath(e,{follow_mount:!1});if(!FS.isMountpoint(t.node))throw new FS.ErrnoError(28);var r=t.node,n=r.mounted,o=FS.getMounts(n);Object.keys(FS.nameTable).forEach((function(e){for(var t=FS.nameTable[e];t;){var r=t.name_next;-1!==o.indexOf(t.mount)&&FS.destroyNode(t),t=r}})),r.mounted=null;var i=r.mount.mounts.indexOf(n);r.mount.mounts.splice(i,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var n=FS.lookupPath(e,{parent:!0}).node,o=PATH.basename(e);if(!o||"."===o||".."===o)throw new FS.ErrnoError(28);var i=FS.mayCreate(n,o);if(i)throw new FS.ErrnoError(i);if(!n.node_ops.mknod)throw new FS.ErrnoError(63);return n.node_ops.mknod(n,o,t,r)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,FS.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,FS.mknod(e,t,0)},mkdirTree:function(e,t){for(var r=e.split("/"),n="",o=0;o<r.length;++o)if(r[o]){n+="/"+r[o];try{FS.mkdir(n,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,r){return void 0===r&&(r=t,t=438),t|=8192,FS.mknod(e,t,r)},symlink:function(e,t){if(!PATH_FS.resolve(e))throw new FS.ErrnoError(44);var r=FS.lookupPath(t,{parent:!0}).node;if(!r)throw new FS.ErrnoError(44);var n=PATH.basename(t),o=FS.mayCreate(r,n);if(o)throw new FS.ErrnoError(o);if(!r.node_ops.symlink)throw new FS.ErrnoError(63);return r.node_ops.symlink(r,n,e)},rename:function(e,t){var r,n,o=PATH.dirname(e),i=PATH.dirname(t),a=PATH.basename(e),s=PATH.basename(t);try{r=FS.lookupPath(e,{parent:!0}).node,n=FS.lookupPath(t,{parent:!0}).node}catch(e){throw new FS.ErrnoError(10)}if(!r||!n)throw new FS.ErrnoError(44);if(r.mount!==n.mount)throw new FS.ErrnoError(75);var u,l=FS.lookupNode(r,a),d=PATH_FS.relative(e,i);if("."!==d.charAt(0))throw new FS.ErrnoError(28);if("."!==(d=PATH_FS.relative(t,o)).charAt(0))throw new FS.ErrnoError(55);try{u=FS.lookupNode(n,s)}catch(e){}if(l!==u){var c=FS.isDir(l.mode),f=FS.mayDelete(r,a,c);if(f)throw new FS.ErrnoError(f);if(f=u?FS.mayDelete(n,s,c):FS.mayCreate(n,s))throw new FS.ErrnoError(f);if(!r.node_ops.rename)throw new FS.ErrnoError(63);if(FS.isMountpoint(l)||u&&FS.isMountpoint(u))throw new FS.ErrnoError(10);if(n!==r&&(f=FS.nodePermissions(r,"w")))throw new FS.ErrnoError(f);try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath(e,t)}catch(r){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}FS.hashRemoveNode(l);try{r.node_ops.rename(l,n,s)}catch(e){throw e}finally{FS.hashAddNode(l)}try{FS.trackingDelegate.onMovePath&&FS.trackingDelegate.onMovePath(e,t)}catch(r){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}}},rmdir:function(e){var t=FS.lookupPath(e,{parent:!0}).node,r=PATH.basename(e),n=FS.lookupNode(t,r),o=FS.mayDelete(t,r,!0);if(o)throw new FS.ErrnoError(o);if(!t.node_ops.rmdir)throw new FS.ErrnoError(63);if(FS.isMountpoint(n))throw new FS.ErrnoError(10);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(e)}catch(t){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,r),FS.destroyNode(n);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(e)}catch(t){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=FS.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new FS.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=FS.lookupPath(e,{parent:!0}).node,r=PATH.basename(e),n=FS.lookupNode(t,r),o=FS.mayDelete(t,r,!1);if(o)throw new FS.ErrnoError(o);if(!t.node_ops.unlink)throw new FS.ErrnoError(63);if(FS.isMountpoint(n))throw new FS.ErrnoError(10);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(e)}catch(t){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,r),FS.destroyNode(n);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(e)}catch(t){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=FS.lookupPath(e).node;if(!t)throw new FS.ErrnoError(44);if(!t.node_ops.readlink)throw new FS.ErrnoError(28);return PATH_FS.resolve(FS.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var r=FS.lookupPath(e,{follow:!t}).node;if(!r)throw new FS.ErrnoError(44);if(!r.node_ops.getattr)throw new FS.ErrnoError(63);return r.node_ops.getattr(r)},lstat:function(e){return FS.stat(e,!0)},chmod:function(e,t,r){var n;if(!(n="string"==typeof e?FS.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new FS.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})},lchmod:function(e,t){FS.chmod(e,t,!0)},fchmod:function(e,t){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(8);FS.chmod(r.node,t)},chown:function(e,t,r,n){var o;if(!(o="string"==typeof e?FS.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new FS.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:function(e,t,r){FS.chown(e,t,r,!0)},fchown:function(e,t,r){var n=FS.getStream(e);if(!n)throw new FS.ErrnoError(8);FS.chown(n.node,t,r)},truncate:function(e,t){if(t<0)throw new FS.ErrnoError(28);var r;if(!(r="string"==typeof e?FS.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new FS.ErrnoError(63);if(FS.isDir(r.mode))throw new FS.ErrnoError(31);if(!FS.isFile(r.mode))throw new FS.ErrnoError(28);var n=FS.nodePermissions(r,"w");if(n)throw new FS.ErrnoError(n);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(8);if(0==(2097155&r.flags))throw new FS.ErrnoError(28);FS.truncate(r.node,t)},utime:function(e,t,r){var n=FS.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open:function(e,t,r,n,o){if(""===e)throw new FS.ErrnoError(44);var i;if(r=void 0===r?438:r,r=64&(t="string"==typeof t?FS.modeStringToFlags(t):t)?4095&r|32768:0,"object"==typeof e)i=e;else{e=PATH.normalize(e);try{i=FS.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var a=!1;if(64&t)if(i){if(128&t)throw new FS.ErrnoError(20)}else i=FS.mknod(e,r,0),a=!0;if(!i)throw new FS.ErrnoError(44);if(FS.isChrdev(i.mode)&&(t&=-513),65536&t&&!FS.isDir(i.mode))throw new FS.ErrnoError(54);if(!a){var s=FS.mayOpen(i,t);if(s)throw new FS.ErrnoError(s)}512&t&&FS.truncate(i,0),t&=-641;var u=FS.createStream({node:i,path:FS.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1},n,o);u.stream_ops.open&&u.stream_ops.open(u),!Module.logReadFiles||1&t||(FS.readFiles||(FS.readFiles={}),e in FS.readFiles||(FS.readFiles[e]=1,console.log("FS.trackingDelegate error on read file: "+e)));try{if(FS.trackingDelegate.onOpenFile){var l=0;1!=(2097155&t)&&(l|=FS.tracking.openFlags.READ),0!=(2097155&t)&&(l|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile(e,l)}}catch(t){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return u},close:function(e){if(FS.isClosed(e))throw new FS.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{FS.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,r){if(FS.isClosed(e))throw new FS.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new FS.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new FS.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:function(e,t,r,n,o){if(n<0||o<0)throw new FS.ErrnoError(28);if(FS.isClosed(e))throw new FS.ErrnoError(8);if(1==(2097155&e.flags))throw new FS.ErrnoError(8);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(31);if(!e.stream_ops.read)throw new FS.ErrnoError(28);var i=void 0!==o;if(i){if(!e.seekable)throw new FS.ErrnoError(70)}else o=e.position;var a=e.stream_ops.read(e,t,r,n,o);return i||(e.position+=a),a},write:function(e,t,r,n,o,i){if(n<0||o<0)throw new FS.ErrnoError(28);if(FS.isClosed(e))throw new FS.ErrnoError(8);if(0==(2097155&e.flags))throw new FS.ErrnoError(8);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(31);if(!e.stream_ops.write)throw new FS.ErrnoError(28);1024&e.flags&&FS.llseek(e,0,2);var a=void 0!==o;if(a){if(!e.seekable)throw new FS.ErrnoError(70)}else o=e.position;var s=e.stream_ops.write(e,t,r,n,o,i);a||(e.position+=s);try{e.path&&FS.trackingDelegate.onWriteToFile&&FS.trackingDelegate.onWriteToFile(e.path)}catch(t){console.log("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return s},allocate:function(e,t,r){if(FS.isClosed(e))throw new FS.ErrnoError(8);if(t<0||r<=0)throw new FS.ErrnoError(28);if(0==(2097155&e.flags))throw new FS.ErrnoError(8);if(!FS.isFile(e.node.mode)&&!FS.isDir(e.node.mode))throw new FS.ErrnoError(43);if(!e.stream_ops.allocate)throw new FS.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,n,o,i,a){if(0!=(2&i)&&0==(2&a)&&2!=(2097155&e.flags))throw new FS.ErrnoError(2);if(1==(2097155&e.flags))throw new FS.ErrnoError(2);if(!e.stream_ops.mmap)throw new FS.ErrnoError(43);return e.stream_ops.mmap(e,t,r,n,o,i,a)},msync:function(e,t,r,n,o){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,o):0},munmap:function(e){return 0},ioctl:function(e,t,r){if(!e.stream_ops.ioctl)throw new FS.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:function(e,t){if((t=t||{}).flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,n=FS.open(e,t.flags),o=FS.stat(e).size,i=new Uint8Array(o);return FS.read(n,i,0,o,0),"utf8"===t.encoding?r=UTF8ArrayToString(i,0):"binary"===t.encoding&&(r=i),FS.close(n),r},writeFile:function(e,t,r){(r=r||{}).flags=r.flags||"w";var n=FS.open(e,r.flags,r.mode);if("string"==typeof t){var o=new Uint8Array(lengthBytesUTF8(t)+1),i=stringToUTF8Array(t,o,0,o.length);FS.write(n,o,0,i,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");FS.write(n,t,0,t.byteLength,void 0,r.canOwn)}FS.close(n)},cwd:function(){return FS.currentPath},chdir:function(e){var t=FS.lookupPath(e,{follow:!0});if(null===t.node)throw new FS.ErrnoError(44);if(!FS.isDir(t.node.mode))throw new FS.ErrnoError(54);var r=FS.nodePermissions(t.node,"x");if(r)throw new FS.ErrnoError(r);FS.currentPath=t.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){var e;if(FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(e,t,r,n,o){return n}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0)),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else if(ENVIRONMENT_IS_NODE)try{var r=require("crypto");e=function(){return r.randomBytes(1)[0]}}catch(e){}e||(e=function(){abort("random_device")}),FS.createDevice("/dev","random",e),FS.createDevice("/dev","urandom",e),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var e=FS.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var r=+t,n=FS.getStream(r);if(!n)throw new FS.ErrnoError(8);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return o.parent=o,o}},e}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr"),FS.open("/dev/stdin","r"),FS.open("/dev/stdout","w"),FS.open("/dev/stderr","w")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[44].forEach((function(e){FS.genericErrors[e]=new FS.ErrnoError(e),FS.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS}},init:function(e,t,r){FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=e||Module.stdin,Module.stdout=t||Module.stdout,Module.stderr=r||Module.stderr,FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var e=Module._fflush;e&&e(0);for(var t=0;t<FS.streams.length;t++){var r=FS.streams[t];r&&FS.close(r)}},getMode:function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r},joinPath:function(e,t){var r=PATH.join.apply(null,e);return t&&"/"==r[0]&&(r=r.substr(1)),r},absolutePath:function(e,t){return PATH_FS.resolve(t,e)},standardizePath:function(e){return PATH.normalize(e)},findObject:function(e,t){var r=FS.analyzePath(e,t);return r.exists?r.object:(___setErrNo(r.error),null)},analyzePath:function(e,t){try{e=(n=FS.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=FS.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=PATH.basename(e),n=FS.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createFolder:function(e,t,r,n){var o=PATH.join2("string"==typeof e?e:FS.getPath(e),t),i=FS.getMode(r,n);return FS.mkdir(o,i)},createPath:function(e,t,r,n){e="string"==typeof e?e:FS.getPath(e);for(var o=t.split("/").reverse();o.length;){var i=o.pop();if(i){var a=PATH.join2(e,i);try{FS.mkdir(a)}catch(e){}e=a}}return a},createFile:function(e,t,r,n,o){var i=PATH.join2("string"==typeof e?e:FS.getPath(e),t),a=FS.getMode(n,o);return FS.create(i,a)},createDataFile:function(e,t,r,n,o,i){var a=t?PATH.join2("string"==typeof e?e:FS.getPath(e),t):e,s=FS.getMode(n,o),u=FS.create(a,s);if(r){if("string"==typeof r){for(var l=new Array(r.length),d=0,c=r.length;d<c;++d)l[d]=r.charCodeAt(d);r=l}FS.chmod(u,146|s);var f=FS.open(u,"w");FS.write(f,r,0,r.length,0,i),FS.close(f),FS.chmod(u,s)}return u},createDevice:function(e,t,r,n){var o=PATH.join2("string"==typeof e?e:FS.getPath(e),t),i=FS.getMode(!!r,!!n);FS.createDevice.major||(FS.createDevice.major=64);var a=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(a,{open:function(e){e.seekable=!1},close:function(e){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,t,n,o,i){for(var a=0,s=0;s<o;s++){var u;try{u=r()}catch(e){throw new FS.ErrnoError(29)}if(void 0===u&&0===a)throw new FS.ErrnoError(6);if(null==u)break;a++,t[n+s]=u}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,o,i){for(var a=0;a<o;a++)try{n(t[r+a])}catch(e){throw new FS.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),a}}),FS.mkdev(o,i,a)},createLink:function(e,t,r,n,o){var i=PATH.join2("string"==typeof e?e:FS.getPath(e),t);return FS.symlink(r,i)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!read_)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=intArrayFromString(read_(e.url),!0),e.usedBytes=e.contents.length}catch(e){t=!1}return t||___setErrNo(29),t},createLazyFile:function(e,t,r,n,o){function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},i.prototype.setDataGetter=function(e){this.getter=e},i.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,n=Number(e.getResponseHeader("Content-length")),o=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;o||(a=n);var s=this;s.setDataGetter((function(e){var t=e*a,o=(e+1)*a-1;if(o=Math.min(o,n-1),void 0===s.chunks[e]&&(s.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>n-1)throw new Error("only "+n+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",r,!1),n!==a&&o.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+r+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):intArrayFromString(o.responseText||"",!0)}(t,o)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!i&&n||(a=n=1,n=this.getter(0).length,a=n,console.log("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new i;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var s={isDevice:!1,contents:a}}else s={isDevice:!1,url:r};var u=FS.createFile(e,t,s,n,o);s.contents?u.contents=s.contents:s.url&&(u.contents=null,u.url=s.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var l={};return Object.keys(u.stream_ops).forEach((function(e){var t=u.stream_ops[e];l[e]=function(){if(!FS.forceLoadFile(u))throw new FS.ErrnoError(29);return t.apply(null,arguments)}})),l.read=function(e,t,r,n,o){if(!FS.forceLoadFile(u))throw new FS.ErrnoError(29);var i=e.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,n);if(i.slice)for(var s=0;s<a;s++)t[r+s]=i[o+s];else for(s=0;s<a;s++)t[r+s]=i.get(o+s);return a},u.stream_ops=l,u},createPreloadedFile:function(e,t,r,n,o,i,a,s,u,l){Browser.init();var d=t?PATH_FS.resolve(PATH.join2(e,t)):e,c=getUniqueRunDependency("cp "+d);function f(r){function f(r){l&&l(),s||FS.createDataFile(e,t,r,n,o,u),i&&i(),removeRunDependency(c)}var m=!1;Module.preloadPlugins.forEach((function(e){m||e.canHandle(d)&&(e.handle(r,d,f,(function(){a&&a(),removeRunDependency(c)})),m=!0)})),m||f(r)}addRunDependency(c),"string"==typeof r?Browser.asyncLoad(r,(function(e){f(e)}),a):f(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,r){t=t||function(){},r=r||function(){};var n=FS.indexedDB();try{var o=n.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return r(e)}o.onupgradeneeded=function(){console.log("creating db"),o.result.createObjectStore(FS.DB_STORE_NAME)},o.onsuccess=function(){var n=o.result.transaction([FS.DB_STORE_NAME],"readwrite"),i=n.objectStore(FS.DB_STORE_NAME),a=0,s=0,u=e.length;function l(){0==s?t():r()}e.forEach((function(e){var t=i.put(FS.analyzePath(e).object.contents,e);t.onsuccess=function(){++a+s==u&&l()},t.onerror=function(){s++,a+s==u&&l()}})),n.onerror=r},o.onerror=r},loadFilesFromDB:function(e,t,r){t=t||function(){},r=r||function(){};var n=FS.indexedDB();try{var o=n.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return r(e)}o.onupgradeneeded=r,o.onsuccess=function(){var n=o.result;try{var i=n.transaction([FS.DB_STORE_NAME],"readonly")}catch(e){return void r(e)}var a=i.objectStore(FS.DB_STORE_NAME),s=0,u=0,l=e.length;function d(){0==u?t():r()}e.forEach((function(e){var t=a.get(e);t.onsuccess=function(){FS.analyzePath(e).exists&&FS.unlink(e),FS.createDataFile(PATH.dirname(e),PATH.basename(e),t.result,!0,!0,!0),++s+u==l&&d()},t.onerror=function(){u++,s+u==l&&d()}})),i.onerror=r},o.onerror=r}},SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,t){if("/"!==t[0]){var r;if(-100===e)r=FS.cwd();else{var n=FS.getStream(e);if(!n)throw new FS.ErrnoError(8);r=n.path}t=PATH.join2(r,t)}return t},doStat:function(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(e.node)))return-54;throw e}return HEAP32[r>>2]=n.dev,HEAP32[r+4>>2]=0,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAP32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,HEAP32[r+32>>2]=0,tempI64=[n.size>>>0,(tempDouble=n.size,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks,HEAP32[r+56>>2]=n.atime.getTime()/1e3|0,HEAP32[r+60>>2]=0,HEAP32[r+64>>2]=n.mtime.getTime()/1e3|0,HEAP32[r+68>>2]=0,HEAP32[r+72>>2]=n.ctime.getTime()/1e3|0,HEAP32[r+76>>2]=0,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+80>>2]=tempI64[0],HEAP32[r+84>>2]=tempI64[1],0},doMsync:function(e,t,r,n){var o=new Uint8Array(HEAPU8.subarray(e,e+r));FS.msync(t,o,0,r,n)},doMkdir:function(e,t){return"/"===(e=PATH.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),FS.mkdir(e,t,0),0},doMknod:function(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return FS.mknod(e,t,r),0},doReadlink:function(e,t,r){if(r<=0)return-28;var n=FS.readlink(e),o=Math.min(r,lengthBytesUTF8(n)),i=HEAP8[t+o];return stringToUTF8(n,t,r+1),HEAP8[t+o]=i,o},doAccess:function(e,t){if(-8&t)return-28;var r;if(!(r=FS.lookupPath(e,{follow:!0}).node))return-44;var n="";return 4&t&&(n+="r"),2&t&&(n+="w"),1&t&&(n+="x"),n&&FS.nodePermissions(r,n)?-2:0},doDup:function(e,t,r){var n=FS.getStream(r);return n&&FS.close(n),FS.open(e,t,0,r,r).fd},doReadv:function(e,t,r,n){for(var o=0,i=0;i<r;i++){var a=HEAP32[t+8*i>>2],s=HEAP32[t+(8*i+4)>>2],u=FS.read(e,HEAP8,a,s,n);if(u<0)return-1;if(o+=u,u<s)break}return o},doWritev:function(e,t,r,n){for(var o=0,i=0;i<r;i++){var a=HEAP32[t+8*i>>2],s=HEAP32[t+(8*i+4)>>2],u=FS.write(e,HEAP8,a,s,n);if(u<0)return-1;o+=u}return o},varargs:0,get:function(e){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(){return UTF8ToString(SYSCALLS.get())},getStreamFromFD:function(e){void 0===e&&(e=SYSCALLS.get());var t=FS.getStream(e);if(!t)throw new FS.ErrnoError(8);return t},get64:function(){var e=SYSCALLS.get();return SYSCALLS.get(),e},getZero:function(){SYSCALLS.get()}};function ___syscall221(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();switch(SYSCALLS.get()){case 0:return(n=SYSCALLS.get())<0?-28:FS.open(r.path,r.flags,0,n).fd;case 1:case 2:case 13:case 14:return 0;case 3:return r.flags;case 4:var n=SYSCALLS.get();return r.flags|=n,0;case 12:return n=SYSCALLS.get(),HEAP16[n+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return ___setErrNo(28),-1}}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall5(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStr(),n=SYSCALLS.get(),o=SYSCALLS.get();return FS.open(r,n,o).fd}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get();switch(n){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var o=SYSCALLS.get();return HEAP32[o>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:return o=SYSCALLS.get(),FS.ioctl(r,n,o);default:abort("bad ioctl syscall "+n)}}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function __emscripten_syscall_munmap(e,t){if(-1===e||0===t)return-28;var r=SYSCALLS.mappings[e];if(!r)return 0;if(t===r.len){var n=FS.getStream(r.fd);SYSCALLS.doMsync(e,n,t,r.flags),FS.munmap(n),SYSCALLS.mappings[e]=null,r.allocated&&_free(r.malloc)}return 0}function ___syscall91(e,t){SYSCALLS.varargs=t;try{return __emscripten_syscall_munmap(SYSCALLS.get(),SYSCALLS.get())}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___unlock(){}function _fd_close(e){try{var t=SYSCALLS.getStreamFromFD(e);return FS.close(t),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function ___wasi_fd_close(){return _fd_close.apply(null,arguments)}function _fd_read(e,t,r,n){try{var o=SYSCALLS.getStreamFromFD(e),i=SYSCALLS.doReadv(o,t,r);return HEAP32[n>>2]=i,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function ___wasi_fd_read(){return _fd_read.apply(null,arguments)}function _fd_seek(e,t,r,n,o){try{var i=SYSCALLS.getStreamFromFD(e),a=4294967296*r+(t>>>0),s=9007199254740992;return a<=-s||a>=s?-61:(FS.llseek(i,a,n),tempI64=[i.position>>>0,(tempDouble=i.position,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[o>>2]=tempI64[0],HEAP32[o+4>>2]=tempI64[1],i.getdents&&0===a&&0===n&&(i.getdents=null),0)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function ___wasi_fd_seek(){return _fd_seek.apply(null,arguments)}function _fd_write(e,t,r,n){try{var o=SYSCALLS.getStreamFromFD(e),i=SYSCALLS.doWritev(o,t,r);return HEAP32[n>>2]=i,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function ___wasi_fd_write(){return _fd_write.apply(null,arguments)}function getShiftFromSize(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function embind_init_charCodes(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);embind_charCodes=e}var embind_charCodes=void 0;function readLatin1String(e){for(var t="",r=e;HEAPU8[r];)t+=embind_charCodes[HEAPU8[r++]];return t}var awaitingDependencies={},registeredTypes={},typeDependencies={},char_0=48,char_9=57;function makeLegalFunctionName(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=char_0&&t<=char_9?"_"+e:e}function createNamedFunction(e,t){return e=makeLegalFunctionName(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function extendError(e,t){var r=createNamedFunction(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var BindingError=void 0;function throwBindingError(e){throw new BindingError(e)}var InternalError=void 0;function throwInternalError(e){throw new InternalError(e)}function whenDependentTypesAreResolved(e,t,r){function n(t){var n=r(t);n.length!==e.length&&throwInternalError("Mismatched type converter count");for(var o=0;o<e.length;++o)registerType(e[o],n[o])}e.forEach((function(e){typeDependencies[e]=t}));var o=new Array(t.length),i=[],a=0;t.forEach((function(e,t){registeredTypes.hasOwnProperty(e)?o[t]=registeredTypes[e]:(i.push(e),awaitingDependencies.hasOwnProperty(e)||(awaitingDependencies[e]=[]),awaitingDependencies[e].push((function(){o[t]=registeredTypes[e],++a===i.length&&n(o)})))})),0===i.length&&n(o)}function registerType(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||throwBindingError('type "'+n+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+n+"' twice")}if(registeredTypes[e]=t,delete typeDependencies[e],awaitingDependencies.hasOwnProperty(e)){var o=awaitingDependencies[e];delete awaitingDependencies[e],o.forEach((function(e){e()}))}}function __embind_register_bool(e,t,r,n,o){var i=getShiftFromSize(r);registerType(e,{name:t=readLatin1String(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:o},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=HEAP8;else if(2===r)n=HEAP16;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=HEAP32}return this.fromWireType(n[e>>i])},destructorFunction:null})}function __embind_register_constant(e,t,r){e=readLatin1String(e),whenDependentTypesAreResolved([],[t],(function(t){return t=t[0],Module[e]=t.fromWireType(r),[]}))}var emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function __emval_decref(e){e>4&&0==--emval_handle_array[e].refcount&&(emval_handle_array[e]=void 0,emval_free_list.push(e))}function count_emval_handles(){for(var e=0,t=5;t<emval_handle_array.length;++t)void 0!==emval_handle_array[t]&&++e;return e}function get_first_emval(){for(var e=5;e<emval_handle_array.length;++e)if(void 0!==emval_handle_array[e])return emval_handle_array[e];return null}function init_emval(){Module.count_emval_handles=count_emval_handles,Module.get_first_emval=get_first_emval}function __emval_register(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[t]={refcount:1,value:e},t}}function simpleReadValueFromPointer(e){return this.fromWireType(HEAPU32[e>>2])}function __embind_register_emval(e,t){registerType(e,{name:t=readLatin1String(t),fromWireType:function(e){var t=emval_handle_array[e].value;return __emval_decref(e),t},toWireType:function(e,t){return __emval_register(t)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function _embind_repr(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function floatReadValueFromPointer(e,t){switch(t){case 2:return function(e){return this.fromWireType(HEAPF32[e>>2])};case 3:return function(e){return this.fromWireType(HEAPF64[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function __embind_register_float(e,t,r){var n=getShiftFromSize(r);registerType(e,{name:t=readLatin1String(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+_embind_repr(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(t,n),destructorFunction:null})}function new_(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=createNamedFunction(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var n=new r,o=e.apply(n,t);return o instanceof Object?o:n}function runDestructors(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function craftInvokerFunction(e,t,r,n,o){var i=t.length;i<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==r,s=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){s=!0;break}var l="void"!==t[0].name,d="",c="";for(u=0;u<i-2;++u)d+=(0!==u?", ":"")+"arg"+u,c+=(0!==u?", ":"")+"arg"+u+"Wired";var f="return function "+makeLegalFunctionName(e)+"("+d+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n";s&&(f+="var destructors = [];\n");var m=s?"destructors":"null",_=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[throwBindingError,n,o,runDestructors,t[0],t[1]];for(a&&(f+="var thisWired = classParam.toWireType("+m+", this);\n"),u=0;u<i-2;++u)f+="var arg"+u+"Wired = argType"+u+".toWireType("+m+", arg"+u+"); // "+t[u+2].name+"\n",_.push("argType"+u),p.push(t[u+2]);if(a&&(c="thisWired"+(c.length>0?", ":"")+c),f+=(l?"var rv = ":"")+"invoker(fn"+(c.length>0?", ":"")+c+");\n",s)f+="runDestructors(destructors);\n";else for(u=a?1:2;u<t.length;++u){var h=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(f+=h+"_dtor("+h+"); // "+t[u].name+"\n",_.push(h+"_dtor"),p.push(t[u].destructorFunction))}return l&&(f+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),f+="}\n",_.push(f),new_(Function,_).apply(null,p)}function ensureOverloadTable(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||throwBindingError("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function exposePublicSymbol(e,t,r){Module.hasOwnProperty(e)?((void 0===r||void 0!==Module[e].overloadTable&&void 0!==Module[e].overloadTable[r])&&throwBindingError("Cannot register public name '"+e+"' twice"),ensureOverloadTable(Module,e,e),Module.hasOwnProperty(r)&&throwBindingError("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),Module[e].overloadTable[r]=t):(Module[e]=t,void 0!==r&&(Module[e].numArguments=r))}function heap32VectorToArray(e,t){for(var r=[],n=0;n<e;n++)r.push(HEAP32[(t>>2)+n]);return r}function replacePublicSymbol(e,t,r){Module.hasOwnProperty(e)||throwInternalError("Replacing nonexistant public symbol"),void 0!==Module[e].overloadTable&&void 0!==r?Module[e].overloadTable[r]=t:(Module[e]=t,Module[e].argCount=r)}function embind__requireFunction(e,t){var r;if(e=readLatin1String(e),void 0!==Module["FUNCTION_TABLE_"+e])r=Module["FUNCTION_TABLE_"+e][t];else if("undefined"!=typeof FUNCTION_TABLE)r=FUNCTION_TABLE[t];else{var n=Module["dynCall_"+e];void 0===n&&void 0===(n=Module["dynCall_"+e.replace(/f/g,"d")])&&throwBindingError("No dynCall invoker for signature: "+e),r=function(r){for(var n=[],o=1;o<e.length;++o)n.push("a"+o);var i="return function dynCall_"+e+"_"+t+"("+n.join(", ")+") {\n";return i+="    return dynCall(rawFunction"+(n.length?", ":"")+n.join(", ")+");\n",i+="};\n",new Function("dynCall","rawFunction",i)(r,t)}(n)}return"function"!=typeof r&&throwBindingError("unknown function pointer with signature "+e+": "+t),r}var UnboundTypeError=void 0;function getTypeName(e){var t=___getTypeName(e),r=readLatin1String(t);return _free(t),r}function throwUnboundTypeError(e,t){var r=[],n={};throw t.forEach((function e(t){n[t]||registeredTypes[t]||(typeDependencies[t]?typeDependencies[t].forEach(e):(r.push(t),n[t]=!0))})),new UnboundTypeError(e+": "+r.map(getTypeName).join([", "]))}function __embind_register_function(e,t,r,n,o,i){var a=heap32VectorToArray(t,r);e=readLatin1String(e),o=embind__requireFunction(n,o),exposePublicSymbol(e,(function(){throwUnboundTypeError("Cannot call "+e+" due to unbound types",a)}),t-1),whenDependentTypesAreResolved([],a,(function(r){var n=[r[0],null].concat(r.slice(1));return replacePublicSymbol(e,craftInvokerFunction(e,n,null,o,i),t-1),[]}))}function integerReadValueFromPointer(e,t,r){switch(t){case 0:return r?function(e){return HEAP8[e]}:function(e){return HEAPU8[e]};case 1:return r?function(e){return HEAP16[e>>1]}:function(e){return HEAPU16[e>>1]};case 2:return r?function(e){return HEAP32[e>>2]}:function(e){return HEAPU32[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function __embind_register_integer(e,t,r,n,o){t=readLatin1String(t),-1===o&&(o=4294967295);var i=getShiftFromSize(r),a=function(e){return e};if(0===n){var s=32-8*r;a=function(e){return e<<s>>>s}}var u=-1!=t.indexOf("unsigned");registerType(e,{name:t,fromWireType:a,toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+_embind_repr(r)+'" to '+this.name);if(r<n||r>o)throw new TypeError('Passing a number "'+_embind_repr(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+o+"]!");return u?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(t,i,0!==n),destructorFunction:null})}function __embind_register_memory_view(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function o(e){var t=HEAPU32,r=t[e>>=2],o=t[e+1];return new n(t.buffer,o,r)}registerType(e,{name:r=readLatin1String(r),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function __embind_register_std_string(e,t){var r="std::string"===(t=readLatin1String(t));registerType(e,{name:t,fromWireType:function(e){var t,n=HEAPU32[e>>2];if(r){var o=HEAPU8[e+4+n],i=0;0!=o&&(i=o,HEAPU8[e+4+n]=0);for(var a=e+4,s=0;s<=n;++s){var u=e+4+s;if(0==HEAPU8[u]){var l=UTF8ToString(a);void 0===t?t=l:(t+=String.fromCharCode(0),t+=l),a=u+1}}0!=i&&(HEAPU8[e+4+n]=i)}else{var d=new Array(n);for(s=0;s<n;++s)d[s]=String.fromCharCode(HEAPU8[e+4+s]);t=d.join("")}return _free(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||throwBindingError("Cannot pass non-string to std::string");var o=(r&&n?function(){return lengthBytesUTF8(t)}:function(){return t.length})(),i=_malloc(4+o+1);if(HEAPU32[i>>2]=o,r&&n)stringToUTF8(t,i+4,o+1);else if(n)for(var a=0;a<o;++a){var s=t.charCodeAt(a);s>255&&(_free(i),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[i+4+a]=s}else for(a=0;a<o;++a)HEAPU8[i+4+a]=t[a];return null!==e&&e.push(_free,i),i},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function __embind_register_std_wstring(e,t,r){var n,o;r=readLatin1String(r),2===t?(n=function(){return HEAPU16},o=1):4===t&&(n=function(){return HEAPU32},o=2),registerType(e,{name:r,fromWireType:function(e){for(var t=n(),r=HEAPU32[e>>2],i=new Array(r),a=e+4>>o,s=0;s<r;++s)i[s]=String.fromCharCode(t[a+s]);return _free(e),i.join("")},toWireType:function(e,r){var i=r.length,a=_malloc(4+i*t),s=n();HEAPU32[a>>2]=i;for(var u=a+4>>o,l=0;l<i;++l)s[u+l]=r.charCodeAt(l);return null!==e&&e.push(_free,a),a},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function __embind_register_void(e,t){registerType(e,{isVoid:!0,name:t=readLatin1String(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function _abort(){abort()}function _emscripten_get_heap_size(){return HEAP8.length}function abortOnCannotGrowMemory(e){abort("OOM")}function _emscripten_resize_heap(e){abortOnCannotGrowMemory(e)}function _exit(e){exit(e)}function _getenv(e){return 0===e?0:(e=UTF8ToString(e),ENV.hasOwnProperty(e)?(_getenv.ret&&_free(_getenv.ret),_getenv.ret=allocateUTF8(ENV[e]),_getenv.ret):0)}function _gettimeofday(e){var t=Date.now();return HEAP32[e>>2]=t/1e3|0,HEAP32[e+4>>2]=t%1e3*1e3|0,0}function _llvm_exp2_f32(e){return Math.pow(2,e)}function _llvm_stackrestore(e){var t=_llvm_stacksave,r=t.LLVM_SAVEDSTACKS[e];t.LLVM_SAVEDSTACKS.splice(e,1),stackRestore(r)}function _llvm_stacksave(){var e=_llvm_stacksave;return e.LLVM_SAVEDSTACKS||(e.LLVM_SAVEDSTACKS=[]),e.LLVM_SAVEDSTACKS.push(stackSave()),e.LLVM_SAVEDSTACKS.length-1}var ___tm_current=60160,___tm_timezone=(stringToUTF8("GMT",60208,4),60208);function _tzset(){if(!_tzset.called){_tzset.called=!0,HEAP32[__get_timezone()>>2]=60*(new Date).getTimezoneOffset();var e=(new Date).getFullYear(),t=new Date(e,0,1),r=new Date(e,6,1);HEAP32[__get_daylight()>>2]=Number(t.getTimezoneOffset()!=r.getTimezoneOffset());var n=s(t),o=s(r),i=allocate(intArrayFromString(n),"i8",ALLOC_NORMAL),a=allocate(intArrayFromString(o),"i8",ALLOC_NORMAL);r.getTimezoneOffset()<t.getTimezoneOffset()?(HEAP32[__get_tzname()>>2]=i,HEAP32[__get_tzname()+4>>2]=a):(HEAP32[__get_tzname()>>2]=a,HEAP32[__get_tzname()+4>>2]=i)}function s(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}}function _localtime_r(e,t){_tzset();var r=new Date(1e3*HEAP32[e>>2]);HEAP32[t>>2]=r.getSeconds(),HEAP32[t+4>>2]=r.getMinutes(),HEAP32[t+8>>2]=r.getHours(),HEAP32[t+12>>2]=r.getDate(),HEAP32[t+16>>2]=r.getMonth(),HEAP32[t+20>>2]=r.getFullYear()-1900,HEAP32[t+24>>2]=r.getDay();var n=new Date(r.getFullYear(),0,1),o=(r.getTime()-n.getTime())/864e5|0;HEAP32[t+28>>2]=o,HEAP32[t+36>>2]=-60*r.getTimezoneOffset();var i=new Date(r.getFullYear(),6,1).getTimezoneOffset(),a=n.getTimezoneOffset(),s=0|(i!=a&&r.getTimezoneOffset()==Math.min(a,i));HEAP32[t+32>>2]=s;var u=HEAP32[__get_tzname()+(s?4:0)>>2];return HEAP32[t+40>>2]=u,t}function _localtime(e){return _localtime_r(e,___tm_current)}function _longjmp(e,t){throw _setThrew(e,t||1),"longjmp"}function _emscripten_memcpy_big(e,t,r){HEAPU8.set(HEAPU8.subarray(t,t+r),e)}function __isLeapYear(e){return e%4==0&&(e%100!=0||e%400==0)}function __arraySum(e,t){for(var r=0,n=0;n<=t;r+=e[n++]);return r}var __MONTH_DAYS_LEAP=[31,29,31,30,31,30,31,31,30,31,30,31],__MONTH_DAYS_REGULAR=[31,28,31,30,31,30,31,31,30,31,30,31];function __addDays(e,t){for(var r=new Date(e.getTime());t>0;){var n=__isLeapYear(r.getFullYear()),o=r.getMonth(),i=(n?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR)[o];if(!(t>i-r.getDate()))return r.setDate(r.getDate()+t),r;t-=i-r.getDate()+1,r.setDate(1),o<11?r.setMonth(o+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r}function _strftime(e,t,r,n){var o=HEAP32[n+40>>2],i={tm_sec:HEAP32[n>>2],tm_min:HEAP32[n+4>>2],tm_hour:HEAP32[n+8>>2],tm_mday:HEAP32[n+12>>2],tm_mon:HEAP32[n+16>>2],tm_year:HEAP32[n+20>>2],tm_wday:HEAP32[n+24>>2],tm_yday:HEAP32[n+28>>2],tm_isdst:HEAP32[n+32>>2],tm_gmtoff:HEAP32[n+36>>2],tm_zone:o?UTF8ToString(o):""},a=UTF8ToString(r),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var u in s)a=a.replace(new RegExp(u,"g"),s[u]);var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"];function c(e,t,r){for(var n="number"==typeof e?e.toString():e||"";n.length<t;)n=r[0]+n;return n}function f(e,t){return c(e,t,"0")}function m(e,t){function r(e){return e<0?-1:e>0?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function _(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function p(e){var t=__addDays(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),n=new Date(t.getFullYear()+1,0,4),o=_(r),i=_(n);return m(o,t)<=0?m(i,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var h={"%a":function(e){return l[e.tm_wday].substring(0,3)},"%A":function(e){return l[e.tm_wday]},"%b":function(e){return d[e.tm_mon].substring(0,3)},"%B":function(e){return d[e.tm_mon]},"%C":function(e){return f((e.tm_year+1900)/100|0,2)},"%d":function(e){return f(e.tm_mday,2)},"%e":function(e){return c(e.tm_mday,2," ")},"%g":function(e){return p(e).toString().substring(2)},"%G":function(e){return p(e)},"%H":function(e){return f(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),f(t,2)},"%j":function(e){return f(e.tm_mday+__arraySum(__isLeapYear(e.tm_year+1900)?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,e.tm_mon-1),3)},"%m":function(e){return f(e.tm_mon+1,2)},"%M":function(e){return f(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return f(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),r=0===t.getDay()?t:__addDays(t,7-t.getDay()),n=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(m(r,n)<0){var o=__arraySum(__isLeapYear(n.getFullYear())?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,n.getMonth()-1)-31,i=31-r.getDate()+o+n.getDate();return f(Math.ceil(i/7),2)}return 0===m(r,t)?"01":"00"},"%V":function(e){var t,r=new Date(e.tm_year+1900,0,4),n=new Date(e.tm_year+1901,0,4),o=_(r),i=_(n),a=__addDays(new Date(e.tm_year+1900,0,1),e.tm_yday);return m(a,o)<0?"53":m(i,a)<=0?"01":(t=o.getFullYear()<e.tm_year+1900?e.tm_yday+32-o.getDate():e.tm_yday+1-o.getDate(),f(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),r=1===t.getDay()?t:__addDays(t,0===t.getDay()?1:7-t.getDay()+1),n=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(m(r,n)<0){var o=__arraySum(__isLeapYear(n.getFullYear())?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,n.getMonth()-1)-31,i=31-r.getDate()+o+n.getDate();return f(Math.ceil(i/7),2)}return 0===m(r,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,r=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(r?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var u in h)a.indexOf(u)>=0&&(a=a.replace(new RegExp(u,"g"),h[u](i)));var g=intArrayFromString(a,!1);return g.length>t?0:(writeArrayToMemory(g,e),g.length-1)}function _strftime_l(e,t,r,n){return _strftime(e,t,r,n)}function _time(e){var t=Date.now()/1e3|0;return e&&(HEAP32[e>>2]=t),t}function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,o=new Array(n),i=stringToUTF8Array(e,o,0,o.length);return t&&(o.length=i),o}function invoke_ii(e,t){var r=stackSave();try{return dynCall_ii(e,t)}catch(e){if(stackRestore(r),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_iii(e,t,r){var n=stackSave();try{return dynCall_iii(e,t,r)}catch(e){if(stackRestore(n),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_iiii(e,t,r,n){var o=stackSave();try{return dynCall_iiii(e,t,r,n)}catch(e){if(stackRestore(o),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_vi(e,t){var r=stackSave();try{dynCall_vi(e,t)}catch(e){if(stackRestore(r),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_vii(e,t,r){var n=stackSave();try{dynCall_vii(e,t,r)}catch(e){if(stackRestore(n),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_viii(e,t,r,n){var o=stackSave();try{dynCall_viii(e,t,r,n)}catch(e){if(stackRestore(o),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_viiii(e,t,r,n,o){var i=stackSave();try{dynCall_viiii(e,t,r,n,o)}catch(e){if(stackRestore(i),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}FS.staticInit(),embind_init_charCodes(),BindingError=Module.BindingError=extendError(Error,"BindingError"),InternalError=Module.InternalError=extendError(Error,"InternalError"),init_emval(),UnboundTypeError=Module.UnboundTypeError=extendError(Error,"UnboundTypeError");var asmGlobalArg={},asmLibraryArg={$:___buildEnvironment,f:___cxa_allocate_exception,e:___cxa_throw,z:___lock,_:___map_file,y:___syscall221,Z:___syscall5,Y:___syscall54,X:___syscall91,o:___unlock,x:___wasi_fd_close,W:___wasi_fd_read,C:___wasi_fd_seek,V:___wasi_fd_write,U:__embind_register_bool,w:__embind_register_constant,T:__embind_register_emval,v:__embind_register_float,j:__embind_register_function,k:__embind_register_integer,i:__embind_register_memory_view,u:__embind_register_std_string,S:__embind_register_std_wstring,R:__embind_register_void,__memory_base:1024,__table_base:0,a:_abort,Q:_emscripten_asm_const_ii,P:_emscripten_asm_const_iiddddddddddddd,O:_emscripten_asm_const_iiiid,N:_emscripten_asm_const_iiiiiii,M:_emscripten_asm_const_iiiiiiiidddddddddddddddddddddddddi,L:_emscripten_get_heap_size,J:_emscripten_memcpy_big,I:_emscripten_resize_heap,b:_exit,n:_getenv,t:_gettimeofday,H:_llvm_exp2_f32,m:_llvm_stackrestore,l:_llvm_stacksave,G:_localtime,g:_longjmp,E:_strftime,D:_strftime_l,s:_time,c:abort,h:getTempRet0,q:invoke_ii,K:invoke_iii,F:invoke_iiii,p:invoke_vi,B:invoke_vii,A:invoke_viii,r:invoke_viiii,memory:wasmMemory,d:setTempRet0,table:wasmTable},asm=Module.asm(asmGlobalArg,asmLibraryArg,buffer);Module.asm=asm;var calledRun,__GLOBAL__sub_I_ARToolKitJS_cpp=Module.__GLOBAL__sub_I_ARToolKitJS_cpp=function(){return Module.asm.aa.apply(null,arguments)},__GLOBAL__sub_I_bind_cpp=Module.__GLOBAL__sub_I_bind_cpp=function(){return Module.asm.ba.apply(null,arguments)},__GLOBAL__sub_I_iostream_cpp=Module.__GLOBAL__sub_I_iostream_cpp=function(){return Module.asm.ca.apply(null,arguments)},__ZSt18uncaught_exceptionv=Module.__ZSt18uncaught_exceptionv=function(){return Module.asm.da.apply(null,arguments)},___embind_register_native_and_builtin_types=Module.___embind_register_native_and_builtin_types=function(){return Module.asm.ea.apply(null,arguments)},___emscripten_environ_constructor=Module.___emscripten_environ_constructor=function(){return Module.asm.fa.apply(null,arguments)},___errno_location=Module.___errno_location=function(){return Module.asm.ga.apply(null,arguments)},___getTypeName=Module.___getTypeName=function(){return Module.asm.ha.apply(null,arguments)},__get_daylight=Module.__get_daylight=function(){return Module.asm.ia.apply(null,arguments)},__get_timezone=Module.__get_timezone=function(){return Module.asm.ja.apply(null,arguments)},__get_tzname=Module.__get_tzname=function(){return Module.asm.ka.apply(null,arguments)},_free=Module._free=function(){return Module.asm.la.apply(null,arguments)},_malloc=Module._malloc=function(){return Module.asm.ma.apply(null,arguments)},_setThrew=Module._setThrew=function(){return Module.asm.na.apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return Module.asm.Ra.apply(null,arguments)},stackRestore=Module.stackRestore=function(){return Module.asm.Sa.apply(null,arguments)},stackSave=Module.stackSave=function(){return Module.asm.Ta.apply(null,arguments)},dynCall_di=Module.dynCall_di=function(){return Module.asm.oa.apply(null,arguments)},dynCall_dii=Module.dynCall_dii=function(){return Module.asm.pa.apply(null,arguments)},dynCall_i=Module.dynCall_i=function(){return Module.asm.qa.apply(null,arguments)},dynCall_ii=Module.dynCall_ii=function(){return Module.asm.ra.apply(null,arguments)},dynCall_iidiiii=Module.dynCall_iidiiii=function(){return Module.asm.sa.apply(null,arguments)},dynCall_iii=Module.dynCall_iii=function(){return Module.asm.ta.apply(null,arguments)},dynCall_iiii=Module.dynCall_iiii=function(){return Module.asm.ua.apply(null,arguments)},dynCall_iiiii=Module.dynCall_iiiii=function(){return Module.asm.va.apply(null,arguments)},dynCall_iiiiid=Module.dynCall_iiiiid=function(){return Module.asm.wa.apply(null,arguments)},dynCall_iiiiii=Module.dynCall_iiiiii=function(){return Module.asm.xa.apply(null,arguments)},dynCall_iiiiiid=Module.dynCall_iiiiiid=function(){return Module.asm.ya.apply(null,arguments)},dynCall_iiiiiii=Module.dynCall_iiiiiii=function(){return Module.asm.za.apply(null,arguments)},dynCall_iiiiiiii=Module.dynCall_iiiiiiii=function(){return Module.asm.Aa.apply(null,arguments)},dynCall_iiiiiiiii=Module.dynCall_iiiiiiiii=function(){return Module.asm.Ba.apply(null,arguments)},dynCall_iiiiij=Module.dynCall_iiiiij=function(){return Module.asm.Ca.apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return Module.asm.Da.apply(null,arguments)},dynCall_v=Module.dynCall_v=function(){return Module.asm.Ea.apply(null,arguments)},dynCall_vi=Module.dynCall_vi=function(){return Module.asm.Fa.apply(null,arguments)},dynCall_vid=Module.dynCall_vid=function(){return Module.asm.Ga.apply(null,arguments)},dynCall_vif=Module.dynCall_vif=function(){return Module.asm.Ha.apply(null,arguments)},dynCall_vii=Module.dynCall_vii=function(){return Module.asm.Ia.apply(null,arguments)},dynCall_viid=Module.dynCall_viid=function(){return Module.asm.Ja.apply(null,arguments)},dynCall_viif=Module.dynCall_viif=function(){return Module.asm.Ka.apply(null,arguments)},dynCall_viii=Module.dynCall_viii=function(){return Module.asm.La.apply(null,arguments)},dynCall_viiii=Module.dynCall_viiii=function(){return Module.asm.Ma.apply(null,arguments)},dynCall_viiiii=Module.dynCall_viiiii=function(){return Module.asm.Na.apply(null,arguments)},dynCall_viiiiii=Module.dynCall_viiiiii=function(){return Module.asm.Oa.apply(null,arguments)},dynCall_viiiiiii=Module.dynCall_viiiiiii=function(){return Module.asm.Pa.apply(null,arguments)},dynCall_viijii=Module.dynCall_viijii=function(){return Module.asm.Qa.apply(null,arguments)};function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function run(e){function t(){calledRun||(calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),postRun()))}e=e||arguments_,runDependencies>0||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Module.setStatus("")}),1),t()}),1)):t()))}function exit(e,t){t&&noExitRuntime&&0===e||(noExitRuntime||(ABORT=!0,EXITSTATUS=e,exitRuntime(),Module.onExit&&Module.onExit(e)),quit_(e,new ExitStatus(e)))}if(Module.asm=asm,dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e)},Module.run=run,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();noExitRuntime=!0,run();